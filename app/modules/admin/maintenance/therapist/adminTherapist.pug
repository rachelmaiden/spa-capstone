doctype html
html(lang='en')
  head
    meta(charset='utf-8')
    link(rel='apple-touch-icon', sizes='76x76', href='/assets/paperDashboardPro/img/apple-icon.png')
    link(rel='icon', type='image/png', sizes='96x96', href=`/upload/${reqSession.utilities[0].company_logo}`)
    meta(http-equiv='X-UA-Compatible', content='IE=edge,chrome=1')
    title #{reqSession.utilities.company_name}
    // Canonical SEO
    link(rel='canonical', href='http://www.creative-tim.com/product/paper-dashboard-pro')
    meta(content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0', name='viewport')
    meta(name='viewport', content='width=device-width')
    // Bootstrap core CSS
    link(href='/assets/paperDashboardPro/css/bootstrap.min.css', rel='stylesheet')
    // Paper Dashboard core CSS
    link(href='/assets/paperDashboardPro/css/paper-dashboard.css', rel='stylesheet')
    // CSS for Demo Purpose, don't include it in your project
    link(href='/assets/paperDashboardPro/css/demo.css', rel='stylesheet')
    // Fonts and icons
    link(href='http://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css', rel='stylesheet')
    link(href='https://fonts.googleapis.com/css?family=Muli:400,300', rel='stylesheet', type='text/css')
    link(href='/assets/paperDashboardPro/css/themify-icons.css', rel='stylesheet')
    link(href='/assets/datetimepicker/bootstrap-datetimepicker-solo.css', rel='stylesheet')

    style.
      .pull-right .dropdown-menu:after {
        left: auto;
        right: 10px;
          }
      .pull-right .dropdown-menu {
          left: auto;
          right: 0;
      }
  body
    .wrapper
      .sidebar(data-active-color='spa', style='color: white')
        //
          Tip 1: you can change the color of the sidebar's background using: data-background-color="white | brown"
          Tip 2: you can change the color of the active button using the data-active-color="primary | info | success | warning | danger"
        .logo
          a.simple-text.logo-mini(href='')

          a.simple-text.logo-normal(href='')
            | #{reqSession.utilities[0].company_name}
        .sidebar-wrapper
          .user
            .info
              .photo
                img(src='/assets/paperDashboardPro/img/icon.jpg')
              a.collapsed(data-toggle='collapse', href='#collapseExample')
                span
                  | ADMINISTRATOR
              .clearfix
          ul.nav
            li
              a(href='./admindashboard')
                i.ti-dashboard
                p
                  | Dashboard
            li.active
              a(data-toggle='collapse', href='#componentsExamples')
                i.ti-clipboard
                p
                  | Maintenance
                  b.caret
              #componentsExamples.collapse.in
                ul.nav
                  li(style="margin-left: 5px;")
                    a(data-toggle='collapse', href='#services')
                      p
                        span.sidebar-mini S
                        | Services
                        b(style="margin-right: 30px").caret
                    #services.collapse
                      ul.nav
                        li(style="margin-left: 30px")
                          a(href='./adminServiceType')
                            span.sidebar-normal Service Type
                        li(style="margin-left: 30px")
                          a(href='./adminServices')
                            span.sidebar-normal Services
                        li(style="margin-left: 30px")
                          a(href='./adminServiceDuration')
                            span.sidebar-normal Service Duration
                  li(style="margin-left: 5px;").active
                    a(data-toggle='collapse', href='#therapist')
                      p
                        span.sidebar-mini T
                        | Therapist
                        b(style="margin-right: 30px").caret
                    #therapist.collapse.in
                      ul.nav
                        li(style="margin-left: 30px")
                          a(href='./adminSpecialty')
                            span.sidebar-normal Therapist Skills
                        li(style="margin-left: 30px").active
                          a(href='./adminTherapist')
                            span.sidebar-normal Therapist
                  li(style="margin-left: 5px;")
                    a(data-toggle='collapse', href='#packages')
                      p
                        | Packages
                        span.sidebar-mini P
                        b(style="margin-right: 30px").caret
                    #packages.collapse
                      ul.nav    
                        li(style="margin-left: 30px")
                          a(href='./adminPackages')
                            span.sidebar-normal Packages
                  li(style="margin-left: 5px;")
                    a(data-toggle='collapse', href='#promos')
                      p
                        span.sidebar-mini P
                        | Promos
                        b(style="margin-right: 30px").caret
                    #promos.collapse
                      ul.nav
                        li(style="margin-left: 30px")
                          a(href='./adminPromos')
                            span.sidebar-normal Promos
                  li(style="margin-left: 5px;")
                    a(data-toggle='collapse', href='#rooms')
                      p
                        span.sidebar-mini R
                        | Rooms
                        b(style="margin-right: 30px").caret
                    #rooms.collapse
                      ul.nav
                        li(style="margin-left: 30px")
                          a(href='./adminRoomType')
                            span.sidebar-normal Room Type
                        li(style="margin-left: 30px")
                          a(href='./adminRooms')
                            span.sidebar-normal Rooms
                  li(style="margin-left: 5px;")
                    a(data-toggle='collapse', href='#freebies')
                      p
                        span.sidebar-mini F
                        | Freebies
                        b(style="margin-right: 30px").caret
                    #freebies.collapse
                      ul.nav
                        li(style="margin-left: 30px")
                          a(href='./adminFreebies')
                            span.sidebar-normal Freebies
                  li(style="margin-left: 5px;")
                    a(data-toggle='collapse', href='#gifc')
                      p
                        span.sidebar-mini G
                        | Gift Certificate
                        b(style="margin-right: 30px").caret
                    #gifc.collapse
                      ul.nav
                        li(style="margin-left: 30px")
                          a(href='./giftcertificate')
                            span.sidebar-normal Gift Certificate                     
                  
            li
              a(href="./commission")
                i.ti-envelope
                p
                  | Commission
            li
              a(href="./utilities")
                i.ti-settings
                p
                  | Utilities
            li
              a(data-toggle='collapse', href='#queries')
                i.ti-notepad
                p
                  | Queries
                  b.caret
              #queries.collapse
                ul.nav
                  li(style="margin-left: 30px;")
                    a(href='./customerList')
                      span.sidebar-mini 
                      span.sidebar-normal Customers
                  li(style="margin-left: 30px;")
                    a(href='./loyaltyMembers')
                      span.sidebar-mini 
                      span.sidebar-normal Loyalty Members
                  li(style="margin-left: 30px;")
                    a(href='./servicesList')
                      span.sidebar-mini 
                      span.sidebar-normal Services
                  li(style="margin-left: 30px;")
                    a(href='./packagesList')
                      span.sidebar-mini 
                      span.sidebar-normal Packages
                  li(style="margin-left: 30px;")
                    a(href='./promoList')
                      span.sidebar-mini 
                      span.sidebar-normal Promos
                  li(style="margin-left: 30px;")
                    a(href='./therapistList')
                      span.sidebar-mini 
                      span.sidebar-normal Therapists
                  li(style="margin-left: 30px;")
                    a(href='./roomList')
                      span.sidebar-mini 
                      span.sidebar-normal Rooms    
                  li(style="margin-left: 30px;")
                    a(href='./freebiesList')
                      span.sidebar-mini 
                      span.sidebar-normal Freebies          
            li
              a(data-toggle='collapse', href='#reports')
                i.ti-bar-chart-alt
                p
                  | Reports
                  b.caret
              #reports.collapse
                ul.nav
                  li(style="margin-left: 30px;")
                    a(href='./servicesReport')
                      span.sidebar-mini 
                      span.sidebar-normal Daily
                  li(style="margin-left: 30px;")
                    a(href='./packagesReport')
                      span.sidebar-mini 
                      span.sidebar-normal Monthly
      .main-panel
        nav.navbar.navbar-default
          .container-fluid
            .navbar-minimize

            .navbar-header

              a.navbar-brand(href='#')
                | Therapist
            .collapse.navbar-collapse

              ul.nav.navbar-nav.navbar-right
                li
                  a.dropdown-toggle.btn-rotate(href='',data-toggle='dropdown')
                    i.ti-settings
                    p.hidden-md.hidden-lg
                      | Settings
                  ul.dropdown-menu
                    li
                      a.logout(style="cursor: pointer;") Log Out
        .content
          .container-fluid
            .row
              .col-md-12
                .card
                  .row
                    .col-md-6
                      .card-content
                        button.btn.btn-info.btn-fill.btn-wd(data-toggle='modal', data-target='#addNewTher') Add New Therapist
                  .content
                    .container-fluid
                      .row
                        .col-md-12
                          p.category  
                          br
                          .card
                            .card-content
                              .toolbar
                                // Here you can write extra buttons/actions for the toolbar
                              .fresh-datatables
                                table#datatables.table.table-no-bordered.table-hover(cellspacing='0', width='100%', style='width:100%')
                                  thead
                                    tr
                                      th Name
                                      th Age
                                      th Gender
                                      th Skills
                                      th Available
                                      th.disabled-sorting Actions
                                  
                                  tbody
                                    each thera in theras
                                      tr
                                        td
                                          a.viewDetails(style='color: black; cursor: pointer' rel='tooltip' title='Click to view details' therapist_id=`${thera.therapist_id}`)= thera.therapist_fname+" "+thera.therapist_mname+" "+thera.therapist_lname
                                        input.name(type='hidden' value=`${thera.therapist_fname} ${thera.therapist_mname} ${thera.therapist_lname}` id=`${thera.therapist_id}`)
                                        
                                        td= thera.therapist_birthYear
                                        //- td.age(therapist_id=`${thera.therapist_id}` birthday=`${thera.therapist_birthMonth+'-'+thera.therapist_birthDate+'-'+thera.therapist_birthYear}`)
                                        input(type='hidden' value=`${thera.therapist_birthMonth+'-'+thera.therapist_birthDate+'-'+thera.therapist_birthYear}`)
                                        td= thera.therapist_gender
                                       
                                        td
                                          button.btn.btn-fill.btn-info.viewButton(data-toggle='modal', value=`${thera.therapist_id}`) View Skills
                                        td
                                          if(thera.therapist_availability==0)
                                            input.switch-icon(type='checkbox' checked value=`${thera.therapist_id}`)
                                          else if(thera.therapist_availability==1)
                                            input.switch-icon(type='checkbox' value=`${thera.therapist_id}`)

                                        td
                                          if(thera.therapist_availability==1)
                                            .dropdown.pull-right(style="right: 20px")
                                              button.btn.btn-simple.btn-info.btn-rotate(href='#', data-toggle='dropdown' style='left: auto; right: 13px')
                                                i.ti-settings
                                              ul.dropdown-menu
                                                li
                                                  button.btn.btn-simple.btn-warning.updateButton(data-toggle='modal', value=`${thera.therapist_id}` stlye="margin-right: 15px")
                                                    span.btn-label
                                                    i.ti-pencil-alt
                                                    |  Update
                                                li
                                                  button.btn.btn-simple.btn-danger.deleteButton(data-toggle='modal', value=`${thera.therapist_id}` stlye="margin-right: 15px")
                                                    span.btn-label
                                                    i.ti-trash
                                                    |  Delete
                                          else if(thera.therapist_availability==0)
                                            .dropdown.pull-right(style="right: 20px")
                                              button.btn.btn-simple.btn-info.btn-rotate.bawal(href='#', data-toggle='dropdown' style='left: auto; right: 13px')
                                                i.ti-settings
                                    
                                  
                              



                    // ADD
                  #addNewTher.modal.fade(tabindex='-1', role='dialog')
                    .modal-dialog.modal-lg(role='document')
                      .modal-content
                        .modal-header
                          h5.modal-title
                            center Add New Therapist 
                          button.close(type='button', data-dismiss='modal', aria-label='Close')
                        form#allInputsFormValidation(method='' action='')
                          .modal-body
                            
                            .row
                              .col-md-4
                                .form-group.has-default.bmd-form-group
                                  label Last Name
                                  star *
                                  input.form-control(type='text', placeholder='Last Name' name='therapist_lname' id='therapist_lname' required='true' aria-label='true')
                              .col-md-4
                                .form-group.has-default.bmd-form-group
                                  label First Name
                                  star *
                                  input.form-control(type='text', placeholder='First Name' name='therapist_fname' id='therapist_fname' required='true' aria-label='true') 
                              .col-md-4
                                .form-group.has-default.bmd-form-group
                                  label Middle Name
                                  input.form-control(type='text', placeholder='Middle Name' name='therapist_mname' id='therapist_mname' aria-label='true')     

                            
                            .row
                              .col-md-3
                                .form-group.has-default.bmd-form-group
                                  label Gender
                                  star *
                                  select.selectpicker(name='therapist_gender' id='therapist_gender'  data-style='btn-info' required='true' aria-label='true')
                                    option(value='Male') Male
                                    option(value='Female') Female
                              .col-md-1
                              .col-md-3
                                .form-group.has-default.bmd-form-group
                                  label Birthday
                                  star *
                                input.form-control.datepicker(type='text' name='therapist_birthday' id="calendar" style='margin-top: -15px')
                              .col-md-1
                              .col-md-3
                                .form-group.has-default.bmd-form-group
                                  label Shift
                                  star *
                                  select.selectpicker(name='therapist_shift' title='Select Shift' id='therapist_shift'  data-style='btn-info' required='true' aria-label='true')
                                    option(value='First') First
                                    option(value='Second') Second
                            .row
                              .col-md-6
                                .form-group.has-default.bmd-form-group
                                  label Address
                                  star *
                                  input.form-control(type='text', placeholder='Address' id='therapist_address' name='therapist_address' required='true' aria-label='true')
                              .col-md-3
                                .form-group.has-default.bmd-form-group
                                  label Mobile Number
                                  star *
                                  input.form-control(type='number', placeholder='Mobile Number' id='therapist_contact_no' name='therapist_contact_no' required='true' aria-label='true'  minlength='11' maxlength='11')
                            .row
                              .col-md-4
                                .form-group.has-default.bmd-form-group
                                  label Skills
                                  star *
                                    select.selectpicker(multiple='', title='Select Skill/s', data-style='btn-info', data-size='7' name='therapist_specialty' id='therapist_specialty' required='true' aria-label='true')
                                      each specialty in specialtys
                                        option(value=`${specialty.specialty_id}`)= specialty.specialty_desc
                              .col-md-1
                              .col-md-4
                                .form-group.has-default.bmd-form-group
                                  label License Valid Until
                                  star *  
                                input.form-control.datepickerLicense(type='text' name='therapist_license' id="license" style='margin-top: -15px')           
                          .modal-footer
                            button.btn.btn-secondary.pull-right.btn.btn-info.btn-fill.btn-wd.submitButton(type='button') Add Therapist
                            button.btn.btn-secondary.pull-left.btn.btn-danger.btn-fill.btn-wd(type='button', data-dismiss='modal') Cancel


                  //UPDATE
                  #updateModal.modal.fade(tabindex='-1', role='dialog', aria-labelledby='exampleModalLabel', aria-hidden='true')
                    .modal-dialog.modal-lg(role='document')
                      .modal-content
                        .modal-header
                          h5#exampleModalLabel.modal-title Therapist Information
                          button.close(type='button', data-dismiss='modal', aria-label='Close') 
                            span(aria-hidden='true') x
                        .modal-body#updateAppend
                        .modal-footer
                            button.btn.btn-danger.btn-fill.pull-left#cancelButton(type='button', data-dismiss='modal') Close
                            button.btn.btn-info.btn-fill.pull-right#updateSubmitButton(type='button') Submit

                  //VIEW SPECIALTY
                  #therapistSpecialty.modal.fade(tabindex='-1', role='dialog', aria-labelledby='exampleModalLabel', aria-hidden='true')
                    .modal-dialog(role='document')
                      .modal-content
                        .modal-header
                          button.close(type='button', data-dismiss='modal', aria-label='Close')
                            span(aria-hidden='true') ×
                          center
                            h4.modal-title#title
                        .modal-body#viewAppend
                        .modal-footer#footerAppend
                          center
                            button.btn.btn-secondary.btn.btn-info.btn-fill.btn-wd.updateSpecialty(data-toggle='modal') Update


                  //UPDATE THERAPIST SPECIALTY
                  #updateSpecialty.modal.fade(tabindex='-1', role='dialog', aria-labelledby='exampleModalLabel', aria-hidden='true')
                    .modal-dialog(role='document')
                      .modal-content
                        .modal-header
                          button.close(type='button', data-dismiss='modal', aria-label='Close')
                            span(aria-hidden='true') ×
                          center
                            h4.modal-title Skill/s
                        .modal-body#viewUpdateSpecialtyAppend
                        .modal-footer
                          button.btn.btn-danger.btn-fill.pull-left#cancelButton(type='button', data-dismiss='modal') Close
                          button.btn.btn-info.btn-fill.pull-right#updateSpecialtyButton(type='button') Submit
                  
                  //VIEW THEREPIST DETAILS
                  #viewTherapistDetails.modal.fade(tabindex='-1', role='dialog', aria-labelledby='exampleModalLabel', aria-hidden='true')
                    .modal-dialog(role='document')
                      .modal-content
                        .modal-header
                          button.close(type='button', data-dismiss='modal', aria-label='Close')
                            span(aria-hidden='true') ×
                          center
                            h4.modal-title#titleName
                        .modal-body#Details
                        .modal-footer#footerAppend
                          center
                            button.btn.btn-secondary.btn.btn-info.btn-fill.btn-wd(data-dismiss='modal') Close
              

        footer.footer
          .container-fluid
            .copyright.pull-right
              | © 
              script.
                document.write(new Date().getFullYear())
              | , made with 
              i.fa.fa-heart.heart
              |  by 
              a(href='#') TEAM MBAY
    .fixed-plugin
  // Core JS Files. Extra: TouchPunch for touch library inside jquery-ui.min.js
  script(src='/assets/paperDashboardPro/js/jquery-3.1.1.min.js', type='text/javascript')
  script(src='/assets/paperDashboardPro/js/jquery-ui.min.js', type='text/javascript')
  script(src='/assets/paperDashboardPro/js/perfect-scrollbar.min.js', type='text/javascript')
  script(src='/assets/paperDashboardPro/js/bootstrap.min.js', type='text/javascript')
  // Forms Validations Plugin
  script(src='/assets/paperDashboardPro/js/jquery.validate.min.js')
  // Promise Library for SweetAlert2 working on IE
  script(src='/assets/paperDashboardPro/js/es6-promise-auto.min.js')
  // Plugin for Date Time Picker and Full Calendar Plugin
  script(src='/assets/paperDashboardPro/js/moment.min.js')
  // Date Time Picker Plugin is included in this js file
  script(src='/assets/paperDashboardPro/js/bootstrap-datetimepicker.js')
  // Select Picker Plugin
  script(src='/assets/paperDashboardPro/js/bootstrap-selectpicker.js')
  // Switch and Tags Input Plugins
  script(src='/assets/paperDashboardPro/js/bootstrap-switch-tags.js')
  // Circle Percentage-chart
  script(src='/assets/paperDashboardPro/js/jquery.easypiechart.min.js')
  // Charts Plugin
  script(src='/assets/paperDashboardPro/js/chartist.min.js')
  // Notifications Plugin
  script(src='/assets/paperDashboardPro/js/bootstrap-notify.js')
  // Sweet Alert 2 plugin
  script(src='/assets/paperDashboardPro/js/sweetalert.js')
  // Wizard Plugin
  script(src='/assets/paperDashboardPro/js/jquery.bootstrap.wizard.min.js')
  // Bootstrap Table Plugin
  script(src='/assets/paperDashboardPro/js/bootstrap-table.js')
  // Plugin for DataTables.net
  script(src='/assets/paperDashboardPro/js/jquery.datatables.js')
  // Full Calendar Plugin
  script(src='/assets/paperDashboardPro/js/fullcalendar.min.js')
  // Paper Dashboard PRO Core javascript and methods for Demo purpose
  script(src='/assets/paperDashboardPro/js/paper-dashboard.js')
  // Sharrre Library
  script(src='/assets/paperDashboardPro/js/jquery.sharrre.js')
  // Paper Dashboard PRO DEMO methods, don't include it in your project!
  script(src='/assets/paperDashboardPro/js/demo.js')
  script.
    $(document).ready(function(){
      var ages = $('.age')
      for(var i = 0; i<ages.length; i++){
        
      }

      //- $.post('./adminTherapist/Age').done(function(data){
      //-   console.log(data)
      //-   var dateNow= moment(new Date()).format('MM-DD-YYYY')
      //-   console.log(dateNow)
      //-   var age = $('.age')
      //-   //- var id = $('.age').eq(counter).attr('therapist_id')
      //-   //- var id = $('.age')[counter].getAttribute('therapist_id');

      //-  for(var i=0;i<data.length;i++)
      //-  {
      //-    var birthday = data[i].therapist_birthMonth+'-'+data[i].therapist_birthDate+'-'+data[i].therapist_birthYear
      //-     birthday = moment(dateNow).diff(birthday,'years')
      //-     for(var x=0;x<age.length;x++)
      //-     {
      //-       var id = $('.age')[x].getAttribute('therapist_id');
      //-       console.log(data[i].therapist_id == id)
      //-       if(data[i].therapist_id == id)
      //-       {
      //-         $('.age').text(birthday)
      //-       }
      //-     }
      //-  }
      //- })
    })
  script.
    $(document).ready(function(){
      $('.viewDetails').click(function(){
        var therapist_id = $(this).attr('therapist_id')
        
        $.post('./adminTherapist/viewTherapistDetails',{therapist_id}).done(function(data){
          $('#viewTherapistDetails').modal('show')
          $('#titleName').append(`${data[0].therapist_fname} ${data[0].therapist_mname} ${data[0].therapist_lname}`)
          
          
          var birthday =data[0].therapist_birthMonth+'-'+data[0].therapist_birthDate+'-'+data[0].therapist_birthYear
            birthday = moment(birthday).format('MMMM DD, YYYY')
          var therapist_licenseExpiration = moment(data[0].therapist_licenseExpiration).format('MMMM DD, YYYY')
          $('#Details').append(`<p>Address: ${data[0].therapist_address}
          <p>Birthday: ${birthday} 
          <p>Contact No: ${data[0].therapist_contact_no}
          <p>License Expiration Date: ${therapist_licenseExpiration}`)
        })
      $('#viewTherapistDetails').on('hidden.bs.modal', function (){
          $('#titleName').empty(),
          $('#Details').empty()
        });
      })
    })
  script.
    $(document).ready(function(){
      $('.submitButton').click(function(){
        if($('#therapist_fname').val()==0 && $('#therapist_lname').val()==0 || $('#therapist_address').val()==0 || $('#calendar').val()==0 || $('#therapist_fname').val()==0 || $('#therapist_lname').val()==0)
        {
            swal({
              title: 'Please double check the fields',
              text: 'Make sure all required fields have value', 
              icon: 'warning'
            })
        }
        else
        {
        var license = $('#license').val()
            license = moment(license).format('YYYY-MM-DD')
        var newDate= $('#calendar').val()
            newDate = moment(newDate).format('MM-DD-YYYY')
          var vals = newDate.split('-');
          var year = vals[2];
          var month = vals[0];
          var date = vals[1];
          console.log($('#therapist_specialty').val())
          $.post('/admin/adminTherapist',{
            therapist_fname:$('#therapist_fname').val(),
            therapist_mname:$('#therapist_mname').val(),
            therapist_lname:$('#therapist_lname').val(),
            therapist_address:$('#therapist_address').val(),
            therapist_contact_no:$('#therapist_contact_no').val(),
            therapist_gender:$('#therapist_gender').val(),
            therapist_specialty: $('#therapist_specialty').val(),
            therapist_shift: $('#therapist_shift').val(),
            therapist_licenseExpiration: license,
            newDate, year, month, date
          }).done(function(data){
          if(data.alertDesc == 1)
          {
            swal({
              title:'Success', 
              text:'New therapist added.', 
              icon:'success'
              }).then(function(){
                location.reload()
              })
          }
          else
            {
              swal({
                title:'Not Success', 
                text:'', 
                icon:'warning'
                })
            }
        })
        }


      })
    })
  script.
      $(document).ready(function(){
        $('.logout').click(function(){
            swal({
            title: "Are you sure?",
            text: "Do you want to Log Out?",
            icon: "warning",
            buttons: true,
            dangerMode: true,
          })
          .then((willDelete) => {
            if (willDelete) {
              $.post('/admin/admin/logout')
              location.reload()
            } 
          });
          })
          $('.bawal').click(function(){
            swal({
            title: 'Set this therapist to unavailable first.',
            icon: 'warning'
          })
          })
        // DELETE THERAPIST INFORMATION
        $('.deleteButton').click(function(){
            var idNow = $(this).val();
            var name = $(`.name[id='${idNow}']`).val()
            swal({
              title: 'Do you want to delete '+name+'?',
              text: 'Are you sure?',
              icon: "info",
              buttons: ["Cancel","Proceed"],
              dangerMode: true
                
              }).then((proceed) => {
                if(proceed)
                {
                $.post('/admin/adminTherapist/delete',{id:idNow}).done(function(data){
                  if(data.alertDesc==0)
                  {
                    swal({
                      title: name+' has been deleted.',
                      icon: 'success'
                    }).then(function(){
                      location.reload()
                    })
                  }
                  else
                  {
                    swal({
                      title: 'Error',
                      icon: 'error'
                    })
                  }
                })
                }
                else
                {

                }
                });
            
        }); 
        });

        // VIEW THERAPIST SPECIALTY/SPECIALTIES
        $('.viewButton').click(function(){
          var idNow = $(this).val();
            $.post('/admin/adminTherapist/query1',{id1:idNow})
          .done(data=>{
            console.log(data)
            $('#title').append(`${data.out2.therapist_fname} ${data.out2.therapist_mname} ${data.out2.therapist_lname}`)
            $('#viewAppend').append(`
                  <div class="row">
                    <div class="col-md-6" id="specialty_desc">
                      <label> Skill/s </label>
                      <div class="form-group has-default bmd-form-group">
                      
                      </div>
                    </div>
                  </div>
            `)
            $('#footerAppend').append(`
              <center>
                <input type="hidden" id="inputId" value="${data.id2}"> </input>`)

            for(var i=0; i<data.out1.length;i++){
                $('#specialty_desc').append(`<li>${data.out1[i].specialty_desc}</li>`)
              }
            $('#therapistSpecialty').modal('show')
            $('#therapistSpecialty').on('hidden.bs.modal', function (){
                $('#specialty_desc').remove()
              });
            $('#therapistSpecialty').on('hidden.bs.modal', function (){
                $('#inputId').remove()
              });
               $('#therapistSpecialty').on('hidden.bs.modal', function (){
                $('#title').empty()
              });
          })
        })

        // UPDATE THERAPIST SPECIALTY
        $('.updateSpecialty').click(function(){
          var idNow = $('#inputId').val();
          var name =$(`.name[id='${idNow}']`).val()
            $.post('/admin/adminTherapist/query2',{id1:idNow})
          .done(data=>{
            console.log(data)
            $('#viewUpdateSpecialtyAppend').append(`
                  <div class="form-group has-default bmd-form-group">
                    <label>Therapist Skill/s
                      <select name="specialty" id="specialty" multiple="" title="Choose Skill/s" data-style="btn-info" data-size="7" class="selectpicker">
                      </select>
                    </label>
                  </div>
            `)

            for(var i=0; i<data.length;i++){
                $('#specialty').append(`<option value="${data[i].specialty_id}"> ${data[i].specialty_desc} </option>`)
              }
                $('#specialty').selectpicker()
            $('#updateSpecialty').modal('show')
            $('#therapistSpecialty').modal('hide')
            $('#updateSpecialty').on('hidden.bs.modal', function (){
                $('#viewUpdateSpecialtyAppend').empty()
              });
            $('#updateSpecialty').on('hidden.bs.modal', function (){
                $('#specialty').empty()
              });
            $('#updateSpecialtyButton').click(function(){
              $.post('/admin/adminTherapist/updateTherapistSpecialty',{
                  specialty:$('#specialty').val(),
                  
                  id1: idNow
                }).done(function(data){
                  if(data.alertDesc==0)
                  {
                    swal({
                      title:'Success!',
                      text: 'Skill/s information of '+name+' has been updated.',
                      icon: 'success'
                    }).then(function(){
                      location.reload()
                    })
                  }
                  else
                  {
                    swal({
                      title: 'ERROR',
                      icon: 'error'
                    })
                  }
                })
          })
        })
      })      


        // UPDATE THERAPIST INFORMATION
        $('.updateButton').click(function(){
          var idNow = $(this).val();
              $.post('/admin/adminTherapist/query',{id1:idNow})
          .done(data=>{
            console.log(data)
              $('#updateAppend').append(`
                 <div class="row">
                  <div class="col-md-4">
                    <div class="form-group has-default bmd-form-group">
                      <label>Last Name</label>
                      <star>*</star>
                      <input class="form-control" type="text" placeholder="${data.therapist_lname}" value="${data.therapist_lname}" name="therapist_lname" id="firstname" required="true" aria-label="true" />
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="form-group has-default bmd-form-group">
                      <label>First Name</label>
                      <star>*</star>
                      <input class="form-control" type="text" placeholder="${data.therapist_fname}" value="${data.therapist_fname}" name="therapist_fname" id="firstname" required="true" aria-label="true" />
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="form-group has-default bmd-form-group">
                      <label>Middle Name</label>
                      <input class="form-control" type="text" placeholder="${data.therapist_mname}" value='${data.therapist_mname}' name="therapist_mname" id="middlename" aria-label="true" />
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-3">
                    <div class="form-group has-default bmd-form-group">
                      <label>Gender</label>
                      <star>*</star>
                      <select class="selectpicker" name="therapist_gender" id="gender" data-style="btn-info" required="true" aria-label="true">
                      </select>
                    </div>
                  </div>
                  <div class="col-md-1"></div>
                  <div class="col-md-3">
                    <div class="form-group has-default bmd-form-group">
                      <label>Birthday</label>
                      <star>*</star>
                    </div>
                    <input class="form-control datepicker" type="text" name="therapist_birthday" id="calendar_thera" style="margin-top: -15px;" />
                  </div>
                  <div class="col-md-1"></div>
                  <div class="col-md-3">
                    <div class="form-group has-default bmd-form-group">
                      <label>Shift</label>
                      <star>*</star>
                      <select class="selectpicker" name="therapist_shift" title="Select Shift" id="thera_shift" data-style="btn-info" required="true" aria-label="true">
                      </select>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-6">
                    <div class="form-group has-default bmd-form-group">
                      <label>Address</label>
                      <star>*</star>
                      <input class="form-control" type="text" placeholder="${data.therapist_address}" value='${data.therapist_address}' id="address" name="therapist_address" required="true" aria-label="true" />
                    </div>
                  </div>
                  <div class="col-md-3">
                    <div class="form-group has-default bmd-form-group">
                      <label>Mobile Number</label>
                      <star>*</star>
                      <input class="form-control" type="number" placeholder="${data.therapist_contact_no}" value='${data.therapist_contact_no}' id="ontact_no" name="therapist_contact_no" required="true" aria-label="true" minlength="11" maxlength="11" />
                    </div>
                  </div>
                </div>`)
              if(data.therapist_gender == 'Male'){
                $('#gender').append(`<option value="Male" selected>Male</option>
                    <option value="Female">Female</option>`
                )
              }
              if(data.therapist_gender == 'Female'){
                $('#gender').append(`<option value="Male">Male</option>
                    <option value="Female" selected>Female</option>`
                )
              }
              if(data.therapist_shift == 'First'){
                $('#thera_shift').append(`<option value="First" selected>First</option>
                    <option value="Second">Second</option>`
                )
              }
              if(data.therapist_shift == 'Second'){
                $('#thera_shift').append(`<option value="First">First</option>
                    <option value="Second" selected>Second</option>`
                )
              }

              //INIT
              $('#updateModal').modal('show') 
              $('#gender').selectpicker()
              $('#therapist_specialty').selectpicker()
              $('#thera_shift').selectpicker()
              $(function () {
                var date = new Date()
                var year = date.getFullYear()
                var year2 = year - "18"
                var year3 = new Date(year2, 12,00)
                $('.datepicker').datetimepicker({
                  viewMode: 'years',
                  format: 'MMMM DD, YYYY',
                  maxDate: year3,
                  icons: {
                    time: "fa fa-clock-o",
                    date: "fa fa-calendar",
                    up: "fa fa-chevron-up",
                    down: "fa fa-chevron-down",
                    previous: 'fa fa-chevron-left',
                    next: 'fa fa-chevron-right',
                    today: 'fa fa-screenshot',
                    clear: 'fa fa-trash',
                    close: 'fa fa-remove'
                    },
                    widgetPositioning:{"horizontal":"auto",
                    "vertical":"auto"}
                  });
              var therapist_birthday = data.therapist_birthMonth+' '+data.therapist_birthDate+" "+data.therapist_birthYear
                  therapist_birthday = moment(therapist_birthday).format('MMMM DD, YYYY')
              $('#calendar_thera').val(therapist_birthday)
              })            


              //WHEN THE MODAL IS HIDDEN
              $('#updateModal').on('hidden.bs.modal', function (){
                $('#updateAppend').empty()
                $('#gender').empty()
                });
              $('#cancelButton').click(function(){
                  ('#updateAppend').empty();
              })


              //UPDATE BUTTOn
              $('#updateSubmitButton').click(function(){
                  var newDate= $('#therapist_birthday').val()
                  var vals = newDate.split('-');
                  var year = vals[2];
                  var month = vals[0];
                  var date = vals[1];
                  $.post('/admin/adminTherapist/update',{
                  therapist_fname:$('#firstname').val(),
                  therapist_mname:$('#middlename').val(),
                  therapist_lname:$('#lastname').val(),
                  therapist_address:$('#address').val(),
                  therapist_gender:$('#gender').val(),
                  therapist_contact_no:$('#contact_no').val(),  
                  id1:idNow, year,month, date
                  }) 
                  .done(data=>{
                      if(data.alertDesc==0){
                          swal({
                          title:'Success', 
                          text:'Therapist infromation updated.', 
                          icon:'success'
                          }).then(function(){
                            location.reload();
                          })
                      }
                      else
                      {
                        swal({
                          title: 'ERROR',
                          icon: 'error'
                        })
                      }
                  })
                })
              })

          })


          
  script(type='text/javascript').
    $(document).ready(function(){
    $('#calendar').val('')
    demo.initOverviewDashboard();
    demo.initCirclePercentage();
    $('.datepickerLicense').datetimepicker({
        viewMode: 'years',
        format: 'MMMM DD, YYYY',
        icons: {
          time: "fa fa-clock-o",
          date: "fa fa-calendar",
          up: "fa fa-chevron-up",
          down: "fa fa-chevron-down",
          previous: 'fa fa-chevron-left',
          next: 'fa fa-chevron-right',
          today: 'fa fa-screenshot',
          clear: 'fa fa-trash',
          close: 'fa fa-remove'
          },
          widgetPositioning:{"horizontal":"auto",
          "vertical":"auto"}
        });
    });
  script(type='text/javascript').
    $(document).ready(function() {
    $('#datatables').DataTable({
    "pagingType": "full_numbers",
    "lengthMenu": [[10, 25, 50, -1], [10, 25, 50, "All"]],
    responsive: true,
    language: {
    search: "_INPUT_",
    searchPlaceholder: "Search records",
    }
    })
    //- $('#add').click(function(){
    //-   location.reload()
    //- swal({
    //-   title:'Success', 
    //-   text:'Therapist Added', 
    //-   icon:'success'})
    //-   .then(function(){
    //-   location.reload();
    //- });
    });
  script.
    $().ready(function(){
      $('#registerFormValidation').validate();
      $('#loginFormValidation').validate();
      $('#allInputsFormValidation').validate();
        });
  
  script.
    $(function () {
      var date = new Date()
      var year = date.getFullYear()
      var year2 = year - "18"
      var year3 = new Date(year2, 12, 00)
      $('.datepicker').datetimepicker({
        viewMode: 'years',
        format: 'MMMM DD, YYYY',
        maxDate: year3,
        icons: {
          time: "fa fa-clock-o",
          date: "fa fa-calendar",
          up: "fa fa-chevron-up",
          down: "fa fa-chevron-down",
          previous: 'fa fa-chevron-left',
          next: 'fa fa-chevron-right',
          today: 'fa fa-screenshot',
          clear: 'fa fa-trash',
          close: 'fa fa-remove'
          },
          widgetPositioning:{"horizontal":"auto",
          "vertical":"auto"}
        });
    })

        
      $('.datepicker').on('dp.hide', function(event){
        setTimeout(function(){
          $('.datepicker').data('DateTimePicker').viewMode('years');
        },1);
      });
  
  script.
   $(document).ready(function(){
    $('#calendar').val('')
   })

  script.
    $(document).ready(function(){
      $(function(){
          console.log(localStorage)
          var name = localStorage.getItem('name')
          if (localStorage.getItem('name'))
          {
            if(localStorage.getItem('status')==1)
            {
            $.notify(
              {
              icon: 'ti-bell',
              message: name+' has been set to not available.',
              
            },
            {
              type: 'success'
            },
            {
            animate: {
                  enter: 'animated bounceInDown',
                  exit: 'animated bounceOutUp'
                }
            })
              localStorage.clear()
            }
            else
            {
                $.notify(
              {
              icon: 'ti-bell',
              message: name+' has been set to available.',
              
            },
            {
              type: 'success'
            },
            {
            animate: {
                  enter: 'animated bounceInDown',
                  exit: 'animated bounceOutUp'
                }
            })
              localStorage.clear()
            }
        }
        })
    $('.switch-icon').on('switchChange.bootstrapSwitch', function(event,state){
      var idNow = $(this).val();
      var name = $(`.name[id='${idNow}']`).val()
          if(state==false)
          {
            var stats = 1
            console.log(name)
            //- alert(stats)
            //- alert(idNow)
            $.post('/admin/adminTherapist/statusChange',{stats,id:idNow}).done(function(data){
              if(data.alertDesc == 0)
              {
                localStorage.setItem('name',name)
                localStorage.setItem('status',stats)
                location.reload()
                
                
              }
              else
              {

              }
            })
            
          }
          else if(state==true)
          {
            var idNow = $(this).val();
            var stats = 0
            //- alert(stats)
            //- alert(idNow)
            $.post('/admin/adminTherapist/statusChange',{stats,id:idNow}).done(function(data){
              if(data.alertDesc==0)
              {
                localStorage.setItem('name',name)
                localStorage.setItem('status',stats)
                location.reload()
              }
              else
              {

              }
            })
          }
        });
    })