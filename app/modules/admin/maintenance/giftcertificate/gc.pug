doctype html
html(lang='en')
  head
    meta(charset='utf-8')
    link(rel='apple-touch-icon', sizes='76x76', href='/assets/paperDashboardPro/img/apple-icon.png')
    link(rel='icon', type='image/png', sizes='96x96', href=`/upload/${reqSession.utilities[0].company_logo}`)
    meta(http-equiv='X-UA-Compatible', content='IE=edge,chrome=1')
    title #{reqSession.utilities[0].company_name}
    // Canonical SEO
    link(rel='canonical', href='http://www.creative-tim.com/product/paper-dashboard-pro')
    meta(content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0', name='viewport')
    meta(name='viewport', content='width=device-width')
    // Bootstrap core CSS
    link(href='/assets/paperDashboardPro/css/bootstrap.min.css', rel='stylesheet')
    // Paper Dashboard core CSS
    link(href='/assets/paperDashboardPro/css/paper-dashboard.css', rel='stylesheet')
    // CSS for Demo Purpose, don't include it in your project
    link(href='/assets/paperDashboardPro/css/demo.css', rel='stylesheet')
    // Fonts and icons
    link(href='http://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css', rel='stylesheet')
    link(href='https://fonts.googleapis.com/css?family=Muli:400,300', rel='stylesheet', type='text/css')
    link(href='/assets/paperDashboardPro/css/themify-icons.css', rel='stylesheet')
  body
    .wrapper
      .sidebar(data-active-color='spa', style='color: white')
        //
          Tip 1: you can change the color of the sidebar's background using: data-background-color="white | brown"
          Tip 2: you can change the color of the active button using the data-active-color="primary | info | success | warning | danger"
        .logo
          a.simple-text.logo-mini(href='')
          a.simple-text.logo-normal(href='')
            | #{reqSession.utilities[0].company_name}
        .sidebar-wrapper
          .user
            .info
              .photo
                img(src='/assets/paperDashboardPro/img/icon.jpg')
              a.collapsed(data-toggle='collapse', href='#collapseExample' )
                span
                  | ADMINISTRATOR
              .clearfix
          ul.nav
            li
              a(href='./admindashboard')
                i.ti-dashboard
                p
                  | Dashboard
            li.active
              a(data-toggle='collapse', href='#componentsExamples')
                i.ti-clipboard
                p
                  | Maintenance
                  b.caret
              #componentsExamples.collapse.in
                ul.nav
                  li(style="margin-left: 5px;")
                    a(data-toggle='collapse', href='#services')
                      p
                        span.sidebar-mini S
                        | Services
                        b(style="margin-right: 30px").caret
                    #services.collapse
                      ul.nav
                        li(style="margin-left: 30px")
                          a(href='./adminServiceType')
                            span.sidebar-normal Service Type
                        li(style="margin-left: 30px")
                          a(href='./adminServices')
                            span.sidebar-normal Services
                        li(style="margin-left: 30px")
                          a(href='./adminServiceDuration')
                            span.sidebar-normal Service Duration
                  li(style="margin-left: 5px;")
                    a(data-toggle='collapse', href='#therapist')
                      p
                        span.sidebar-mini T
                        | Therapist
                        b(style="margin-right: 30px").caret
                    #therapist.collapse
                      ul.nav
                        li(style="margin-left: 30px")
                          a(href='./adminSpecialty')
                            span.sidebar-normal Therapist Skills
                        li(style="margin-left: 30px")
                          a(href='./adminTherapist')
                            span.sidebar-normal Therapist
                  li(style="margin-left: 5px;")
                    a(data-toggle='collapse', href='#packages')
                      p
                        | Packages
                        span.sidebar-mini P
                        b(style="margin-right: 30px").caret
                    #packages.collapse
                      ul.nav    
                        li(style="margin-left: 30px")
                          a(href='./adminPackages')
                            span.sidebar-normal Packages
                  li(style="margin-left: 5px;")
                    a(data-toggle='collapse', href='#promos')
                      p
                        span.sidebar-mini P
                        | Promos
                        b(style="margin-right: 30px").caret
                    #promos.collapse
                      ul.nav
                        li(style="margin-left: 30px")
                          a(href='./adminPromos')
                            span.sidebar-normal Promos
                  li(style="margin-left: 5px;")
                    a(data-toggle='collapse', href='#rooms')
                      p
                        span.sidebar-mini R
                        | Rooms
                        b(style="margin-right: 30px").caret
                    #rooms.collapse
                      ul.nav
                        li(style="margin-left: 30px")
                          a(href='./adminRoomType')
                            span.sidebar-normal Room Type
                        li(style="margin-left: 30px")
                          a(href='./adminRooms')
                            span.sidebar-normal Rooms
                  li(style="margin-left: 5px;")
                    a(data-toggle='collapse', href='#freebies')
                      p
                        span.sidebar-mini F
                        | Freebies
                        b(style="margin-right: 30px").caret
                    #freebies.collapse
                      ul.nav
                        li(style="margin-left: 30px")
                          a(href='./adminFreebies')
                            span.sidebar-normal Freebies
                  li(style="margin-left: 5px;").active
                    a(data-toggle='collapse', href='#gifc')
                      p
                        span.sidebar-mini G
                        | Gift Certificate
                        b(style="margin-right: 30px").caret
                    #gifc.collapse.in
                      ul.nav
                        li(style="margin-left: 30px").active
                          a(href='./gc')
                            span.sidebar-normal Gift Certificate                        
            li
              a(href="./commission")
                i.ti-envelope
                p
                  | Commission
            li
              a(href="./utilities")
                i.ti-settings
                p
                  | Utilities
            li
              a(data-toggle='collapse', href='#queries')
                i.ti-notepad
                p
                  | Queries
                  b.caret
              #queries.collapse
                ul.nav
                  li(style="margin-left: 30px;")
                    a(href='./customerList')
                      span.sidebar-mini 
                      span.sidebar-normal Customers
                  li(style="margin-left: 30px;")
                    a(href='./loyaltyMembers')
                      span.sidebar-mini 
                      span.sidebar-normal Loyalty Members
                  li(style="margin-left: 30px;")
                    a(href='./servicesList')
                      span.sidebar-mini 
                      span.sidebar-normal Services
                  li(style="margin-left: 30px;")
                    a(href='./packagesList')
                      span.sidebar-mini 
                      span.sidebar-normal Packages
                  li(style="margin-left: 30px;")
                    a(href='./promoList')
                      span.sidebar-mini 
                      span.sidebar-normal Promos
                  li(style="margin-left: 30px;")
                    a(href='./therapistList')
                      span.sidebar-mini 
                      span.sidebar-normal Therapists
                  li(style="margin-left: 30px;")
                    a(href='./roomList')
                      span.sidebar-mini 
                      span.sidebar-normal Rooms    
                  li(style="margin-left: 30px;")
                    a(href='./freebiesList')
                      span.sidebar-mini 
                      span.sidebar-normal Freebies          
            li
              a(data-toggle='collapse', href='#reports')
                i.ti-bar-chart-alt
                p
                  | Reports
                  b.caret
              #reports.collapse
                ul.nav
                  li(style="margin-left: 30px;")
                    a(href='./servicesReport')
                      span.sidebar-mini 
                      span.sidebar-normal Daily
                  li(style="margin-left: 30px;")
                    a(href='./packagesReport')
                      span.sidebar-mini 
                      span.sidebar-normal Monthly
   
      .main-panel
        nav.navbar.navbar-default
          .container-fluid
            .navbar-minimize

            .navbar-header

              a.navbar-brand(href='#')
                | Gift Certificate
            .collapse.navbar-collapse

              ul.nav.navbar-nav.navbar-right
                li
                  a.btn-rotate(href='#settings')
                    i.ti-settings
                    p.hidden-md.hidden-lg
                      | Settings
        .content
          .container-fluid
            .row
              .col-md-12
                .card
                  .row
                    .col-md-6
                      .card-content
                        button.btn.btn-info.btn-fill.btn-wd.addButton(data-toggle='modal', data-target='') Add New Gift Certificate 
                        
                  .content
                    .container-fluid
                      .row
                        .col-md-12
                          p.category  
                          br
                          .card
                            .card-content
                              .toolbar
                              .fresh-datatables
                                table#datatables.table.table-no-bordered.table-hover(cellspacing='0', width='100%', style='width:100%')
                                  thead
                                    tr
                                      th.disabled-sorting Reference Code
                                      th.disabled-sorting Name
                                      th Value
                                      th Price
                                      th.disabled-sorting Status
                                      th.disabled-sorting Actions
                                      
                                  
                                  tbody
                                    each gc in giftcerts
                                      tr
                                        td= gc.gc_refCode 
                                        td= gc.gc_name
                                          input.name(type='hidden' value=`${gc.gc_name} Ref.Code(${gc.gc_refCode})` id=`${gc.gc_id}`)
                                        td= "₱"+gc.gc_value+".00"
                                        td= "₱"+gc.gc_price+".00"
                                        td
                                          if(gc.release_stats==0)
                                            p Not Release
                                          else if(gc.release_stats==1)
                                            p Released
                                          else if(gc.release_stats==2)
                                            p Sold 
                                          else if(gc.release_stats==3)
                                            p Used
                                          else if(gc.release_stats==4)
                                            p Gifted
                                    
                                        td
                                          if(gc.release_stats==0)
                                            .dropdown.pull-right(style="right: 70px")
                                              button.btn.btn-simple.btn-info.btn-rotate(href='#', data-toggle='dropdown' style='left: auto; right: 13px')
                                                i.ti-settings
                                              ul.dropdown-menu
                                                li
                                                  button.btn.btn-simple.btn-info.releaseButton(data-toggle='modal', value=`${gc.gc_id}` stlye="margin-right: 15px")
                                                    span.btn-label
                                                    i.ti-export
                                                    |  Release
                                                li
                                                  button.btn.btn-simple.btn-danger.deleteButton(data-toggle='modal', value=`${gc.gc_id}` stlye="margin-right: 15px")
                                                    span.btn-label
                                                    i.ti-trash
                                                    |  Delete
                                          else if(gc.release_stats==1||gc.release_stats==2||gc.release_stats==3)
                                            .dropdown.pull-right(style="right: 70px")
                                              button.btn.btn-simple.btn-info.btn-rotate.bawal(href='#', data-toggle='dropdown' style='left: auto; right: 13px')
                                                i.ti-settings
                                    //- div
                                      
                                    //-   .row
                                    //-     .col-md-12
                                    //-       .form-group.has-default.bmd-form-group
                                    //-         h2
                                    //-           p.category
                                    //-           | Released Reference Number
                                    //-   .row
                                    //-     .col-md-2
                                    //-       .form-group.has-default.bmd-form-group
                                    //-         h3
                                    //-           p.category
                                    //-           | 0000
                                          
                                    //-     .col-md-2
                                    //-       .form-group.has-default.bmd-form-group
                                    //-         h3
                                    //-           p.category
                                    //-           | -
                                    //-     .col-md-2
                                    //-       .form-group.has-default.bmd-form-group
                                    //-         h3
                                    //-           p.category
                                    //-           | 0999
                                    //-     .col-md-2
                                    //-       .form-group.has-default.bmd-form-group
                                    //-         br
                                    //-         button.btn.btn-info.btn-fill.btn-wd(data-toggle='modal', data-target='#updateRel') Update
                               
                                    
                                    //[ADD]
                                    #addNewGiftCertificate.modal.fade(tabindex='-1', role='dialog')
                                      .modal-dialog(role='document')
                                        .modal-content
                                          .modal-header
                                            h5.modal-title
                                              center Add New Service
                                            button.close(type='button', data-dismiss='modal', aria-label='Close')
                                          form#allInputsFormValidation(method='#' action='#')
                                            .modal-body
                                              .row
                                                .col-md-6
                                                  .form-group.has-default.bmd-form-group
                                                    label Gift Certificate Name
                                                    star *
                                                    input.form-control(type='text', placeholder='Name' name='gc_name' id='gc_name' required='true', aria-required='true')
                                                .col-md-6
                                                  .form-group.has-default.bmd-form-group
                                                    label Gift Certificate Value
                                                    star *
                                                      .input-group
                                                        span.input-group-addon ₱
                                                        input.form-control(type='text', placeholder='Value' name='gc_value' id='gc_value' required='true', aria-required='true')
                                                        span.input-group-addon .00
                                              .row
                                                .col-md-6
                                                  .form-group.has-default.bmd-form-group
                                                    label Gift Certificate Quantity
                                                    star *
                                                      input.form-control(type='text', number="true" placeholder='Quantity' name='gc_quantity' id='gc_quantity' required='true', aria-required='true')
                                                .col-md-6
                                                  .form-group.has-default.bmd-form-group
                                                    label Gift Certificate Price
                                                    star *
                                                      .input-group
                                                        span.input-group-addon ₱   
                                                        input.form-control(type='text', number="true" placeholder='Price' name='gc_price' id='gc_price' required='true', aria-required='true')
                                                        span.input-group-addon .00
                                              
                                            
                                            .modal-footer
                                              button.btn.btn-secondary.pull-left.btn.btn-info.btn-fill.btn-wd.buttonAddSubmit(type='button') Add Service
                                              button.btn.btn-secondary.btn.btn-danger.btn-fill.btn-wd(type='button', data-dismiss='modal') Cancel
                                    
                                    //[UPDATE]
                                    #updateRel.modal.fade(tabindex='-1', role='dialog')
                                      .modal-dialog(role='document')
                                        .modal-content
                                          .modal-header
                                            h5.modal-title
                                              center Update Released Reference Number
                                            button.close(type='button', data-dismiss='modal', aria-label='Close')
                                          .modal-body
                                            .row
                                              .col-md-5
                                                .form-group.has-default.bmd-form-group
                                                  label
                                                  input.form-control(type='text', placeholder='0000')
                                              .col-md-2
                                                .form-group.has-default.bmd-form-group.text-center
                                                  h3
                                                    p.category
                                                    | -
                                              .col-md-5
                                                .form-group.has-default.bmd-form-group
                                                  label
                                                  input.form-control(type='text', placeholder='9999')
                                          .modal-footer
                                            button.btn.btn-secondary.pull-left.btn.btn-info.btn-fill.btn-wd(type='button') Submit
                                            button.btn.btn-secondary.btn.btn-danger.btn-fill.btn-wd(type='button', data-dismiss='modal') Cancel
        footer.footer
          .container-fluid
            .copyright.pull-right
              | © 
              script.
                document.write(new Date().getFullYear())
              | , made with 
              i.fa.fa-heart.heart
              |  by 
              a(href='#') Team MBAY
    .fixed-plugin
    // Core JS Files. Extra: TouchPunch for touch library inside jquery-ui.min.js
    script(src='/assets/paperDashboardPro/js/jquery-3.1.1.min.js', type='text/javascript')
    script(src='/assets/paperDashboardPro/js/jquery-ui.min.js', type='text/javascript')
    script(src='/assets/paperDashboardPro/js/perfect-scrollbar.min.js', type='text/javascript')
    script(src='/assets/paperDashboardPro/js/bootstrap.min.js', type='text/javascript')
    // Forms Validations Plugin
    script(src='/assets/paperDashboardPro/js/jquery.validate.min.js')
    // Promise Library for SweetAlert2 working on IE
    script(src='/assets/paperDashboardPro/js/es6-promise-auto.min.js')
    // Plugin for Date Time Picker and Full Calendar Plugin
    script(src='/assets/paperDashboardPro/js/moment.min.js')
    // Date Time Picker Plugin is included in this js file
    script(src='/assets/paperDashboardPro/js/bootstrap-datetimepicker.js')
    // Select Picker Plugin
    script(src='/assets/paperDashboardPro/js/bootstrap-selectpicker.js')
    // Switch and Tags Input Plugins
    script(src='/assets/paperDashboardPro/js/bootstrap-switch-tags.js')
    // Circle Percentage-chart
    script(src='/assets/paperDashboardPro/js/jquery.easypiechart.min.js')
    // Charts Plugin
    script(src='/assets/paperDashboardPro/js/chartist.min.js')
    // Notifications Plugin
    script(src='/assets/paperDashboardPro/js/bootstrap-notify.js')
    // Sweet Alert 2 plugin
    script(src='/assets/paperDashboardPro/js/sweetalert.js')

    // Wizard Plugin
    script(src='/assets/paperDashboardPro/js/jquery.bootstrap.wizard.min.js')
    // Bootstrap Table Plugin
    script(src='/assets/paperDashboardPro/js/bootstrap-table.js')
    // Plugin for DataTables.net
    script(src='/assets/paperDashboardPro/js/jquery.datatables.js')
    // Full Calendar Plugin
    script(src='/assets/paperDashboardPro/js/fullcalendar.min.js')
    // Paper Dashboard PRO Core javascript and methods for Demo purpose
    script(src='/assets/paperDashboardPro/js/paper-dashboard.js')
    // Sharrre Library
    script(src='/assets/paperDashboardPro/js/jquery.sharrre.js')
    // Paper Dashboard PRO DEMO methods, don't include it in your project!
    script(src='/assets/paperDashboardPro/js/demo.js')

    //- SCRIPT FOR ADD
    script.
      $(document).ready(function(){
        $('.addButton').click(function(){
          $('#addNewGiftCertificate').modal('show')

          $('.buttonAddSubmit').click(function(){
          var gc_name= $('#gc_name').val()
          var gc_value= $('#gc_value').val()
          var gc_quantity= $('#gc_quantity').val()
          var gc_price= $('#gc_price').val()

          if(gc_name==0 && gc_value==0 && gc_quantity ==0 && gc_price == 0 || gc_name==0 || gc_value==0 || gc_quantity ==0 || gc_price == 0)
            {
                swal({
                title: 'Please double check the Fields',
                text: 'Make sure all required fields has value', 
                icon: 'warning'
              })
            }
          else
          {
            $.post('./AddGiftCertificate',{
              gc_name,
              gc_value,
              gc_quantity,
              gc_price}).done(function(data){
                if(data.alertDesc==0)
                {
                  swal({
                    title: 'success',
                    icon: 'success'
                  }).then(function(){
                    location.reload()
                  })
                }
                else if(data.alertDesc==1)
                {
                  swal({
                    title: 'error',
                    icon: 'error'
                  })
                }
                else if(data.alertDesc==2)
                {
                  swal({
                    title: 'Error',
                    text: gc_name+' is already exist',
                    icon: 'error'
                  })
                }
              })
          }
          })
        })
      })

    //- SCRIPT FOR LOCAL STORAGE
    script.
        $(function(){
          var gc_name = localStorage.getItem('gc_name')
          if (localStorage.getItem('gc_name'))
          {
            if(localStorage.getItem('status')==0)
            {
            $.notify(
              {
              icon: 'ti-bell',
              message: gc_name+' has been release',
              
            },
            {
              type: 'success'
            },
            {
            animate: {
                  enter: 'animated bounceInDown',
                  exit: 'animated bounceOutUp'
                }
            })
              localStorage.clear()
            }
            else
            {
                $.notify(
              {
              icon: 'ti-bell',
              message: gc_name+' is not release, maybe because of error',
              
            },
            {
              type: 'error'
            },
            {
            animate: {
                  enter: 'animated bounceInDown',
                  exit: 'animated bounceOutUp'
                }
            })
              localStorage.clear()
            }
        }
        })
    //- SCRIPT FOR RELEASE
    script.
      $(document).ready(function(){
        $('.releaseButton').click(function(){
          var gc_id = $(this).val()
          var gc_name = $(`.name[id='${gc_id}'`).val()

          $.post('./ReleaseGiftCertificate',{gc_id}).done(function(data){
            if(data.alertDesc==0)
            {
              localStorage.setItem('gc_name',gc_name)
              localStorage.setItem('status',data.alertDesc)
              location.reload()
            }
            else
            {
              localStorage.setItem('gc_name',gc_name)
              localStorage.setItem('status',data.alertDesc)
              location.reload()
            }
          })
        })
      })

    //- SCRIPT FOR DELETE
    script.
      $(document).ready(function(){
        $('.deleteButton').click(function(){
          var gc_id = $(this).val();
          var gc_name = $(`.name[id='${gc_id}']`).val()
            swal({
              title: 'Do you want to delete '+gc_name+'?',
              text: 'Are you sure?',
              icon: "info",
              buttons: ["Cancel","Proceed"],
              dangerMode: true
                
              }).then((proceed) => {
                if(proceed)
                {
                $.post('./DeleteGiftCertificate',{gc_id}).done(function(data){
                  if(data.alertDesc==0)
                  {
                    swal({
                      title: gc_name+' has been deleted',
                      icon: 'success'
                    }).then(function(){
                      location.reload()
                    })
                  }
                  else
                  {
                    swal({
                      title: 'Error',
                      icon: 'error'
                    })
                  }
                })
                }
                else
                {

                }
                });
        })
      })

    //- SCRIPT FOR DATATABLES
    script(type='text/javascript').
      $(document).ready(function() {
      $('#datatables').DataTable({
      "pagingType": "full_numbers",
      "lengthMenu": [[10, 15, 25, -1], [10, 15, 25, "All"]],
      "aaSorting": [],
      responsive: true,
      language: {
      search: "_INPUT_",
      searchPlaceholder: "Search records",
      }
      });
      })
