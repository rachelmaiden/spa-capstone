doctype html
html(lang='en')
  head
    meta(charset='utf-8')
    link(rel='apple-touch-icon', sizes='76x76', href='/assets/now-ui/assets/img/apple-icon.png')
    link(rel='icon', type='image/png', href='/assets/now-ui/assets/img/favicon.png')
    meta(http-equiv='X-UA-Compatible', content='IE=edge,chrome=1')
    title
      | Mbay Health Spa
    meta(content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no', name='viewport')
    // Fonts and icons
    link(href='https://fonts.googleapis.com/css?family=Montserrat:400,700,200', rel='stylesheet')
    link(href='https://use.fontawesome.com/releases/v5.0.6/css/all.css', rel='stylesheet')
    // CSS Files
    link(href='/assets/now-ui/assets/css/bootstrap.min.css', rel='stylesheet')
    link(href='/assets/now-ui/assets/css/now-ui-kit.css?v=1.2.0', rel='stylesheet')
    // CSS Just for demo purpose, don't include it in your project
    link(href='/assets/now-ui/assets/demo/demo.css', rel='stylesheet')
  body.profile-page.sidebar-collapse
    // Navbar
    nav.navbar.navbar-expand-lg.bg-info.fixed-top.navbar-transparent(color-on-scroll='400')
      .container
        .dropdown.button-dropdown
          a#navbarDropdown.dropdown-toggle(href='#pablo', data-toggle='dropdown')
            span.button-bar
            span.button-bar
            span.button-bar
          .dropdown-menu(aria-labelledby='navbarDropdown')
            a.dropdown-header Dropdown header
            a.dropdown-item(href='#') Action
            a.dropdown-item(href='#') Another action
            a.dropdown-item(href='#') Something else here
            .dropdown-divider
            a.dropdown-item(href='#') Separated link
            .dropdown-divider
            a.dropdown-item(href='#') One more separated link
        .navbar-translate
          a.navbar-brand(href='#', rel='tooltip', title='', data-placement='bottom', target='_blank')
            | Mbay Health Spa
          button.navbar-toggler.navbar-toggler(type='button', data-toggle='collapse', data-target='#navigation', aria-controls='navigation-index', aria-expanded='false', aria-label='Toggle navigation')
            span.navbar-toggler-bar.top-bar
            span.navbar-toggler-bar.middle-bar
            span.navbar-toggler-bar.bottom-bar
        #navigation.collapse.navbar-collapse.justify-content-end(data-nav-image='/assets/now-ui/assets/img/blurred-image-1.jpg')
    .wrapper
      each customer in customers
        .page-header.clear-filter(filter-color='')
          if(customer.cust_gender =='Male')
            .page-header-image(data-parallax='true', style="background-image:url('/assets/now-ui/assets/img/bluespa.jpg');")
          else
            .page-header-image(data-parallax='true', style="background-image:url('/assets/now-ui/assets/img/pinkspa.jpg');")
          .container
              
              h3.title= customer.cust_fname+" "+customer.cust_mname+" "+customer.cust_lname
              .content
                .social-description
                  if(customer.paid_status == 0)
                    p Please pay the membership fee (P600)
                  else 
                    h2= customer.member_points
                  p Loyalty Points
                h3
                  strong Loyalty Membership Valid Until:
                    p= customer.membership_validity
    .section
      .container
        .button-container
          button.btn.btn-info.btn-round.btn-lg.buttonReservation(type='button' value=`${id}`) Book Reservation
        h3.title Reservation/s
      center
        p *Reservation details*
    
    .section
      .container
        .row
          .col-md-10.ml-auto.col-xl-6.mr-auto
            // Nav tabs
            div
              div
                ul.nav.nav-tabs.justify-content-center(role='tablist')
                  li.nav-item
                    a.nav-link.active(data-toggle='tab', href='#homes', role='tab')
                      i.now-ui-icons.ui-2_favourite-28
                      |  Services
                  li.nav-item
                    a.nav-link(data-toggle='tab', href='#profiles', role='tab')
                      i.now-ui-icons.shopping_cart-simple
                      |  Promos
                  li.nav-item
                    a.nav-link(data-toggle='tab', href='#messagess', role='tab')
                      i.now-ui-icons.shopping_shop
                      |  Room Rates
              div
                // Tab panes
                .tab-content.text-center
                  #homes.tab-pane.active(role='tabpanel')
                    p Shiatsu Massage
                    p Sweden Massage 
                    p Thai Massage
                  #profiles.tab-pane(role='tabpanel')
                    p Rainy Days Promo
                    p Ber Month Promo
                  #messagess.tab-pane(role='tabpanel')
                    p Hexa Room: 500.00


    #ReservationModal.modal.fade(tabindex='-1', role='dialog')
      .modal-dialog(role='document')
        .modal-content
          .modal-header
            h3.modal-title
              center Book Reservation
            button.close(type='button', data-dismiss='modal', aria-label='Close')
          .modal-body.text-center
            .row
              .form-check.form-check-radio
                label.form-check-label
                  input#exampleRadios1.form-check-input(type='radio', name='exampleRadios', value='single' checked)
                  span.form-check-sign
                  |         Single
              .form-check.form-check-radio
                label.form-check-label
                  input#exampleRadios2.form-check-input(type='radio', name='exampleRadios', value='multiple')
                  span.form-check-sign
                  |         Multiple
            .row
              .col-md-4  
                .form-check.form-check-inline
                  span.input-group-btn
                    button.btn.btn-info.btn-numberMale.buttonMinus(type='button', disabled='disabled', data-type='minus', data-field='quantMale' id="add")
                      span.now-ui-icons.ui-1_simple-delete
                  input.form-control.input-number.male(type='text', id="quantity" name='quantMale', value="0" min='0', max='6' disabled)
                  span.input-group-btn
                    button.btn.btn-info.btn-numberMale.buttonAdd(type='button', data-type='plus', data-field='quantMale', disabled id="add")
                      span.now-ui-icons.ui-1_simple-add
                span.help-block Male
              .col-md-4  
                .form-check.form-check-inline
                  span.input-group-btn
                    button.btn.btn-info.btn-number.buttonMinus(type='button', disabled='disabled', data-type='minus', data-field='quantFemale' id="add")
                      span.now-ui-icons.ui-1_simple-delete
                  input.form-control.input-number.female(type='text', id="quantityFemale" name='quantFemale', value="0" min='0', max='6' disabled)
                  span.input-group-btn
                    button.btn.btn-info.btn-number.buttonAdd(type='button', data-type='plus', data-field='quantFemale', disabled id="add")
                      span.now-ui-icons.ui-1_simple-add

                span.help-block Female
          .modal-footer#reservationFooter

    
    footer.footer.footer-default
      .container
        nav
        #copyright.copyright
          | Â©
          script.
            document.getElementById('copyright').appendChild(document.createTextNode(new Date().getFullYear()))
          a(href='#', target='_blank') Team Mbay
          | .
    // Core JS Files
    script(src='/assets/now-ui/assets/js/core/jquery.min.js', type='text/javascript')
    script(src='/assets/now-ui/assets/js/core/popper.min.js', type='text/javascript')
    script(src='/assets/now-ui/assets/js/core/bootstrap.min.js', type='text/javascript')
    // Plugin for Switches, full documentation here: http://www.jque.re/plugins/version3/bootstrap.switch/
    script(src='/assets/now-ui/assets/js/plugins/bootstrap-switch.js')
    // Plugin for the Sliders, full documentation here: http://refreshless.com/nouislider/
    script(src='/assets/now-ui/assets/js/plugins/nouislider.min.js', type='text/javascript')
    // Plugin for the DatePicker, full documentation here: https://github.com/uxsolutions/bootstrap-datepicker
    script(src='/assets/now-ui/assets/js/plugins/bootstrap-datepicker.js', type='text/javascript')
    // Google Maps Plugin
    script(src='https://maps.googleapis.com/maps/api/js?key=YOUR_KEY_HERE')
    // Control Center for Now Ui Kit: parallax effects, scripts for the example pages etc
    script(src='/assets/now-ui/assets/js/now-ui-kit.js?v=1.2.0', type='text/javascript')
    script.
      $(document).ready(function(){
        $('.buttonReservation').click(function(){
        var id = $(this).val()
        console.log("id"+id)
        $('#ReservationModal').modal('show')
        $('input[type="radio"]').click(function(e){
        if(e.target.checked)
        {
        $('#reservationFooter').empty()
          if($(this).val() == "single")
          {
            $('#reservationFooter').empty()
            $('.buttonAdd').attr('disabled', true)
            $('.buttonMinus').attr('disabled', true)
            //- $('#reservationFooter').append(`
            //- <a class="btn btn-secondary btn-info btn-fill" href="selectDate?id=${id}&reservetype=single" stlye="margin-right: 15px">Next</a>
            //- <button class="btn btn-secondary pull-left btn btn-danger btn-fill btn-wd" type="button" data-dismiss="modal">Cancel</button>`)
          }
          else if($(this).val()=="multiple")
          {
             $('button[id="add"]').click(function(){
            $('#reservationFooter').empty()
            var male=$('.male[name="quantMale"]').val()
            var female=$('.female[name="quantFemale"]').val()
            console.log("female: "+female)
            console.log("male: "+male)
            if(male == 0 && female ==0)
            {
              $('#reservationFooter').empty()
              $('#reservationFooter').append(`
              <button class="btn btn-secondary pull-left btn btn-danger btn-fill btn-wd" type="button" data-dismiss="modal">Cancel</button>
              <a class="btn btn-secondary btn-info btn-fill" href="selectDate?id=${id}&reservetype=single" stlye="margin-right: 15px">Single</a>`)
            }
            else
            {
              $('#reservationFooter').append(`
              <button class="btn btn-secondary pull-left btn btn-danger btn-fill btn-wd" type="button" data-dismiss="modal">Cancel</button>
              <a class="btn btn-secondary btn-info btn-fill" href="selectDate?id=${id}&reservetype=multiple&male=${male}&female=${female}" stlye="margin-right: 15px">Multiple</a>`)

            }
            })
            $('.buttonAdd').attr('disabled',false)
            $('.buttonMinus').attr('disabled', false)
           
          }
         }
        $('#reservationFooter').append(`
        <button class="btn btn-secondary pull-left btn btn-danger btn-fill btn-wd" type="button" data-dismiss="modal">Cancel</button>
        <a class="btn btn-secondary btn-info btn-fill" href="selectDate?id=${id}&reservetype=single" stlye="margin-right: 15px">Single</a>`)
        })
        $('#reservationFooter').append(`
        <button class="btn btn-secondary pull-left btn btn-danger btn-fill btn-wd" type="button" data-dismiss="modal">Cancel</button>
        <a class="btn btn-secondary btn-info pull-right btn-fill" href="selectDate?id=${id}&reservetype=single" stlye="margin-right: 15px">Single</a>`)
        $('#ReservationModal').on('hidden.bs.modal', function (){
          $('#reservationFooter').empty()
        })
      })
      })
  script.
    $('.btn-number').click(function(e){
        e.preventDefault();
        
        fieldName = $(this).attr('data-field');
        type      = $(this).attr('data-type');
        var input = $("input[name='"+fieldName+"']");
        var currentVal = parseInt(input.val());
        if (!isNaN(currentVal)) {
            if(type == 'minus') {
                
                if(currentVal > input.attr('min')) {
                    input.val(currentVal - 1).change();
                } 
                if(parseInt(input.val()) == input.attr('min')) {
                    $(this).attr('disabled', true);
                }

            } else if(type == 'plus') {

                if(currentVal < input.attr('max')) {
                    input.val(currentVal + 1).change();
                }
                if(parseInt(input.val()) == input.attr('max')) {
                    $(this).attr('disabled', true);
                }

            }
        } else {
            input.val(0);
        }
    });
    $('.input-number').focusin(function(){
      $(this).data('oldValue', $(this).val());
    });
    $('.input-number').change(function() {
        
        minValue =  parseInt($(this).attr('min'));
        maxValue =  parseInt($(this).attr('max'));
        valueCurrent = parseInt($(this).val());
        
        name = $(this).attr('name');
        if(valueCurrent >= minValue) {
            $(".btn-number[data-type='minus'][data-field='"+name+"']").removeAttr('disabled')
        } else {
            alert('Sorry, the minimum value was reached');
            $(this).val($(this).data('oldValue'));
        }
        if(valueCurrent <= maxValue) {
            $(".btn-number[data-type='plus'][data-field='"+name+"']").removeAttr('disabled')
        } else {
            alert('Sorry, the maximum value was reached');
            $(this).val($(this).data('oldValue'));
        }
        
            
        });
        $(".input-number").keydown(function (e) {
                // Allow: backspace, delete, tab, escape, enter and .
                if ($.inArray(e.keyCode, [46, 8, 9, 27, 13, 190]) !== -1 ||
                    // Allow: Ctrl+A
                    (e.keyCode == 65 && e.ctrlKey === true) || 
                    // Allow: home, end, left, right
                    (e.keyCode >= 35 && e.keyCode <= 39)) {
                        // let it happen, don't do anything
                        return;
                }
                // Ensure that it is a number and stop the keypress
                if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {
                    e.preventDefault();
                }
          });
  script.
        
    
    $('.btn-numberMale').click(function(e){
        e.preventDefault();
        
        fieldName = $(this).attr('data-field');
        type      = $(this).attr('data-type');
        var input = $("input[name='"+fieldName+"']");
        var currentVal = parseInt(input.val());
        if (!isNaN(currentVal)) {
            if(type == 'minus') {
                
                if(currentVal > input.attr('min')) {
                    input.val(currentVal - 1).change();
                } 
                if(parseInt(input.val()) == input.attr('min')) {
                    $(this).attr('disabled', true);
                }

            } else if(type == 'plus') {

                if(currentVal < input.attr('max')) {
                    input.val(currentVal + 1).change();
                }
                if(parseInt(input.val()) == input.attr('max')) {
                    $(this).attr('disabled', true);
                }

            }
        } else {
            input.val(0);
        }
    });
    $('.input-number').focusin(function(){
      $(this).data('oldValue', $(this).val());
    });
    $('.input-number').change(function() {
        
        minValue =  parseInt($(this).attr('min'));
        maxValue =  parseInt($(this).attr('max'));
        valueCurrent = parseInt($(this).val());
        
        name = $(this).attr('name');
        if(valueCurrent >= minValue) {
            $(".btn-numberMale[data-type='minus'][data-field='"+name+"']").removeAttr('disabled')
        } else {
            alert('Sorry, the minimum value was reached');
            $(this).val($(this).data('oldValue'));
        }
        if(valueCurrent <= maxValue) {
            $(".btn-numberMale[data-type='plus'][data-field='"+name+"']").removeAttr('disabled')
        } else {
            alert('Sorry, the maximum value was reached');
            $(this).val($(this).data('oldValue'));
        }
        
            
        });
        $(".input-number").keydown(function (e) {
                // Allow: backspace, delete, tab, escape, enter and .
                if ($.inArray(e.keyCode, [46, 8, 9, 27, 13, 190]) !== -1 ||
                    // Allow: Ctrl+A
                    (e.keyCode == 65 && e.ctrlKey === true) || 
                    // Allow: home, end, left, right
                    (e.keyCode >= 35 && e.keyCode <= 39)) {
                        // let it happen, don't do anything
                        return;
                }
                // Ensure that it is a number and stop the keypress
                if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {
                    e.preventDefault();
                }
          });
  