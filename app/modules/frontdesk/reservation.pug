doctype html
html(lang='en')
  head
    meta(charset='utf-8')
    link(rel='apple-touch-icon', sizes='76x76', href='../paperDashboardPro/img/apple-icon.png')
    link(rel='icon', type='image/png', sizes='96x96', href='../paperDashboardPro/img/favicon.png')
    meta(http-equiv='X-UA-Compatible', content='IE=edge,chrome=1')
    title Online Booking and Spa Management System
    // Canonical SEO
    link(rel='canonical', href='http://www.creative-tim.com/product/paper-dashboard-pro')
    meta(content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0', name='viewport')
    meta(name='viewport', content='width=device-width')
    // Social tags
    meta(name='keywords', content='creative tim, html dashboard, html css dashboard, web dashboard, bootstrap dashboard, bootstrap, css3 dashboard, bootstrap admin, paper bootstrap dashboard, frontend, responsive bootstrap dashboard')
    meta(name='description', content='Paper Dashboard PRO is a beautiful Bootstrap admin dashboard with a large number of components, designed to look neat and organised. ')
    // Schema.org markup for Google+
    meta(itemprop='name', content='Paper Dashboard PRO by Creative Tim')
    meta(itemprop='description', content='Paper Dashboard PRO is a beautiful Bootstrap admin dashboard with a large number of components, designed to look neat and organised. If you are looking for a tool to manage and visualise data about your business, this dashboard is the thing for you.')
    meta(itemprop='image', content='http://s3.amazonaws.com/creativetim_bucket/products/47/original/opt_pdp_thumbnail.jpg')
    // Twitter Card data
    meta(name='twitter:card', content='summary_large_image')
    meta(name='twitter:site', content='@creativetim')
    meta(name='twitter:title', content='Paper Dashboard PRO by Creative Tim')
    meta(name='twitter:description', content='Paper Dashboard PRO is a beautiful Bootstrap admin dashboard with a large number of components, designed to look neat and organised.')
    meta(name='twitter:creator', content='@creativetim')
    meta(name='twitter:image', content='http://s3.amazonaws.com/creativetim_bucket/products/47/original/opt_pdp_thumbnail.jpg')
    // Open Graph data
    meta(property='og:title', content='Paper Dashboard PRO by Creative Tim')
    meta(property='og:type', content='article')
    meta(property='og:url', content='http://demos.creative-tim.com/paper-dashboard-pro/examples/dashboard/overview.html')
    meta(property='og:image', content='http://s3.amazonaws.com/creativetim_bucket/products/47/original/opt_pdp_thumbnail.jpg')
    meta(property='og:description', content='Paper Dashboard PRO is a beautiful Bootstrap admin dashboard with a large number of components, designed to look neat and organised.')
    meta(property='og:site_name', content='Creative Tim')
    // Bootstrap core CSS
    link(href='/assets/paperDashboardPro/css/bootstrap.min.css', rel='stylesheet')
    // Paper Dashboard core CSS
    link(href='/assets/paperDashboardPro/css/paper-dashboard.css', rel='stylesheet')
    // CSS for Demo Purpose, don't include it in your project
    link(href='/assets/paperDashboardPro/css/demo.css', rel='stylesheet')
    link(href='/assets/paperDashboardPro/css/fullcalendar.css', rel='stylesheet')
    link(href='/assets/paperDashboardPro/css/scheduler.css', rel='stylesheet')
    // Fonts and icons
    link(href='http://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css', rel='stylesheet')
    link(href='https://fonts.googleapis.com/css?family=Muli:400,300', rel='stylesheet', type='text/css')
    link(href='/assets/paperDashboardPro/css/themify-icons.css', rel='stylesheet')
  body.sidebar-mini
    nav.navbar.navbar-transparent.navbar-absolute
      .container
        .navbar-header
          button.navbar-toggle(type='button', data-toggle='collapse', data-target='#navigation-example-2')
            span.sr-only Toggle navigation
            span.icon-bar
            span.icon-bar
            span.icon-bar
        .collapse.navbar-collapse
          ul.nav.navbar-nav.navbar-left
            li
              a.h5(data-toggle="modal" data-target="#Home" style="color: white") Online Reservation and Spa Management System
          ul.nav.navbar-nav.navbar-right
            li
              h5(style="color: white") Current Date: 
                a(style="color: white")#date-part
                  p
                    a(style="color: white")#time-part
                
    .wrapper.wrapper-full-page
      .full-page.login-page(data-color='black', style=("background-image: url('/assets/paperDashboardPro/img/pinkspa.jpg'); background-size: cover; background-repeat: no-repeat"))
        // you can change the color of the filter page using: data-color="blue | azure | green | orange | red | purple"
        .content
          .container
            .row
              .col-md-2.col-sm-1.col-md-offset-0.col-sm-offset-1
                .card(style="width: 80em; bottom: 30px; height: 80em;")
                  form#allInputsFormValidation(action='#', method='#', novalidate='novalidate')
                    .card-header
                    .card-content
                      .nav-tabs-navigation
                        .nav-tabs-wrapper
                          ul#tabs.nav.nav-tabs(data-tabs='tabs')
                            li.1st.active
                              a(href='#home', data-toggle='tab') Therapist & Services
                            li.2nd
                              a(href='#profile', data-toggle='tab') Room & Time
                            li.3rd
                              a(href='#messages', data-toggle='tab') Messages
                      each customer in customers
                        center
                          h4.card-title= `Walkin Customer: ${customer.cust_fname} ${customer.cust_mname} ${customer.cust_lname}`
                      h5 Reservation Date:
                        - var d = new Date(`${date}`) 
                        span= d.toString()
                      hr
                      #my-tab-content.tab-content.text-center
                        #home.tab-pane.active
                          .row
                            .col-md-2
                            .col-md-3
                              .form-group
                                label.control-label
                                  | Number of Guest
                                  star *

                                .input-group
                                  span.input-group-btn
                                    button.btn.btn-info.btn-number.buttonMinus(type='button', disabled='disabled', data-type='minus', data-field='quant[1]')
                                      span.ti-minus
                                  input.form-control.input-number(type='text', id="quantity" name='quant[1]', value="0" min='1', max='6')
                                  span.input-group-btn
                                    button.btn.btn-info.btn-number.buttonAdd(type='button', data-type='plus', data-field='quant[1]')
                                      span.ti-plus

                              span.help-block Guest can be 1 to 6
                            .col-md-4
                              .form-group
                                label.control-label
                                  | Preferred Therapist
                                  star *
                                select.selectpicker.form-control(multiple='', data-style='btn-info',name='therapist' id="therapist" data-max-options='' style="border-radius:10px" )
                                  option(disabled='') - Therapist -
                                  each therapist in therapists
                                    option(value=`${therapist.therapist_id}`)= `${therapist.therapist_fname} ${therapist.therapist_lname}`
                                span.help-block This will be a remark only
                          hr
                          .row
                            .col-md-12
                                label.control-label
                                  | Services
                                  star *
                                .card-content
                                  
                                  .toolbar
                                    // Here you can write extra buttons/actions for the toolbar
                                  .fresh-datatables
                                    table#datatables.table.table-no-bordered.table-hover(cellspacing='0', width='100%', style='width:100%')
                                      thead
                                        tr
                                          th 
                                          th Type
                                          th Name
                                          th Price
                                          th Quantity
                                          th Total
                                      tfoot
                                        tr
                                          th
                                          th Type
                                          th Name
                                          th Price
                                          th Quantity
                                          th Total
                                      tbody
                                        each service in services
                                          tr
                                            td
                                              input.checkbox(type='checkbox' value=`${service.service_id}`)                             
                                            td= service.service_type_desc
                                            td= service.service_name+ " "+ "(" +service.service_duration_desc+" "+"minutes"+")"
                                            td
                                              input(type="hidden" id=`${service.service_id}` value=`${service.service_price}`)
                                              span= service.service_price
                                            td 
                                              span.quantity(service_id=`${service.service_id}`) 0

                                            td 
                                              span.total(service_id=`${service.service_id}`) 0.00
                                    h4 Total: 
                                      a(id="grandtotal") 0.00
                          hr
                          .row          
                            button.btn.btn-default.btn-fill.btnNext1(href="#profile", data-toggle="tab" style="margin-left: 60em; margin-top: 2em") Next

                        #profile.tab-pane
                          .row
                            .col-md-3
                              .form-group
                                label.control-label
                                  | Room 
                                  star *
                                select.form-control(name='room' id="room")
                                  option(selected='', disabled='') - Room -
                                    optgroup(label='Common Room')
                                      each croom in crooms
                                        option(value=`${croom.room_id}`)= croom.room_name
                                    optgroup(label='Private Room' )
                                      each proom in prooms
                                        option(value=`${proom.room_id}`)= proom.room_name
                            .col-md-3
                              .form-group
                                label.control-label
                                  | Time 
                                  star *
                                select.form-control(name='time' id="time")
                                  option(selected='', disabled='') - Time -
                                    option(value="") 1:00PM to 3:00PM
                                    option(value="") 3:00PM to 5:00PM
                                    option(value="") 5:00PM to 7:00PM
                                    option(value="") 7:00PM to 9:00PM
                                    option(value="") 9:00PM to 11:00PM
                                    option(value="") 11:00PM to 1:00AM 
                          .row
                            .col-md-10.col-md-offset-1
                              .card.card-calendar
                                .card-content
                                  #calendar
                          hr
                          .row
                            button.btn.btn-default.btn-fill.btnBack2(href="#home", data-toggle="tab" style="margin-right: 60em; margin-top: 2em") Back
                            button.btn.btn-default.btn-fill.btnNext2(href="#messages", data-toggle="tab" style="margin-left: 60em; margin-top: 2em") Next

                        #messages.tab-pane
                          .row
                            button.btn.btn-default.btn-fill.pull-left.btnBack3(href="#profile", data-toggle="tab") Back
                            button.btn.btn-default.btn-fill.pull-right.btnNext3(href="#", data-toggle="tab") Next

                    //-   .row
                    //-     .col-md-2
                    //-     .col-md-3
                    //-       .form-group
                    //-         label.control-label
                    //-           | Number of Guest
                    //-           star *

                    //-         .input-group
                    //-           span.input-group-btn
                    //-             button.btn.btn-info.btn-number.buttonMinus(type='button', disabled='disabled', data-type='minus', data-field='quant[1]')
                    //-               span.ti-minus
                    //-           input.form-control.input-number(type='text', id="quantity" name='quant[1]', value="0" min='1', max='6')
                    //-           span.input-group-btn
                    //-             button.btn.btn-info.btn-number.buttonAdd(type='button', data-type='plus', data-field='quant[1]')
                    //-               span.ti-plus

                    //-       span.help-block Guest can be 1 to 6
                    //-     .col-md-4
                    //-       .form-group
                    //-         label.control-label
                    //-           | Preferred Therapist
                    //-           star *
                    //-         select.selectpicker.form-control(multiple='', data-style='btn-info',name='therapist' id="therapist" data-max-options='' style="border-radius:10px" )
                    //-           option(disabled='') - Therapist -
                    //-           each therapist in therapists
                    //-             option(value=`${therapist.therapist_id}`)= `${therapist.therapist_fname} ${therapist.therapist_lname}`
                    //-         span.help-block This will be a remark only
                        
                         

                    //-   hr
                    //-   .row
                    //-     .col-md-12
                    //-         label.control-label
                    //-           | Services
                    //-           star *
                    //-         .card-content
                              
                    //-           .toolbar
                    //-             // Here you can write extra buttons/actions for the toolbar
                    //-           .fresh-datatables
                    //-             table#datatables.table.table-no-bordered.table-hover(cellspacing='0', width='100%', style='width:100%')
                    //-               thead
                    //-                 tr
                    //-                   th 
                    //-                   th Type
                    //-                   th Name
                    //-                   th Price
                    //-                   th Quantity
                    //-                   th Total
                    //-               tfoot
                    //-                 tr
                    //-                   th
                    //-                   th Type
                    //-                   th Name
                    //-                   th Price
                    //-                   th Quantity
                    //-                   th Total
                    //-               tbody
                    //-                 each service in services
                    //-                   tr
                    //-                     td
                    //-                       input.checkbox(type='checkbox' value=`${service.service_id}`)                             
                    //-                     td= service.service_type_desc
                    //-                     td= service.service_name+ " "+ "(" +service.service_duration_desc+" "+"minutes"+")"
                    //-                     td
                    //-                       input(type="hidden" id=`${service.service_id}` value=`${service.service_price}`)
                    //-                       span= service.service_price
                    //-                     td 
                    //-                       span.quantity(service_id=`${service.service_id}`) 0

                    //-                     td 
                    //-                       span.total(service_id=`${service.service_id}`) 0.00
                    //-             h4(style="margin-left: 40em" id="grandtotal") Total 0.00


                    //-   hr
                    //-   .row
                    //-     .col-md-3
                    //-       .form-group
                    //-         label.control-label
                    //-           | Room 
                    //-           star *
                    //-         select.form-control(name='room' id="room")
                    //-           option(selected='', disabled='') - Room -
                    //-             optgroup(label='Common Room')
                    //-               each croom in crooms
                    //-                 option(value=`${croom.room_id}`)= croom.room_name
                    //-             optgroup(label='Private Room' )
                    //-               each proom in prooms
                    //-                 option(value=`${proom.room_id}`)= proom.room_name
                    //-     .col-md-3
                    //-       .form-group
                    //-         label.control-label
                    //-           | Time 
                    //-           star *
                    //-         select.form-control(name='time' id="time")
                    //-           option(selected='', disabled='') - Time -
                    //-             option(value="") 1:00PM to 3:00PM
                    //-             option(value="") 3:00PM to 5:00PM
                    //-             option(value="") 5:00PM to 7:00PM
                    //-             option(value="") 7:00PM to 9:00PM
                    //-             option(value="") 9:00PM to 11:00PM
                    //-             option(value="") 11:00PM to 1:00AM        

                    //- hr
                    //- .card-footer.text-center
                    //-   button.btn.btn-info.btn-fill.btn-wd(type='submit') Book



        footer.footer.footer-transparent
          .container
            .copyright
              | © 
              script.
                document.write(new Date().getFullYear())
              | , made with 
              i.fa.fa-heart.heart
              |  by 
              a(href='') Team RJPC

                       
  // Core JS Files. Extra: TouchPunch for touch library inside jquery-ui.min.js
  script(src='/assets/paperDashboardPro/js/jquery-3.1.1.min.js', type='text/javascript')
  script(src='/assets/paperDashboardPro/js/jquery-ui.min.js', type='text/javascript')
  script(src='/assets/paperDashboardPro/js/perfect-scrollbar.min.js', type='text/javascript')
  script(src='/assets/paperDashboardPro/js/bootstrap.min.js', type='text/javascript')
  // Forms Validations Plugin
  script(src='/assets/paperDashboardPro/js/jquery.validate.min.js')
  // Promise Library for SweetAlert2 working on IE
  script(src='/assets/paperDashboardPro/js/es6-promise-auto.min.js')
  // Plugin for Date Time Picker and Full Calendar Plugin
  script(src='/assets/paperDashboardPro/js/moment.min.js')
  // Date Time Picker Plugin is included in this js file
  script(src='/assets/paperDashboardPro/js/bootstrap-datetimepicker.js')
  // Select Picker Plugin
  script(src='/assets/paperDashboardPro/js/bootstrap-selectpicker.js')
  // Switch and Tags Input Plugins
  script(src='/assets/paperDashboardPro/js/bootstrap-switch-tags.js')
  // Circle Percentage-chart
  script(src='/assets/paperDashboardPro/js/jquery.easypiechart.min.js')
  // Charts Plugin
  script(src='/assets/paperDashboardPro/js/chartist.min.js')
  // Notifications Plugin
  script(src='/assets/paperDashboardPro/js/bootstrap-notify.js')
  // Sweet Alert 2 plugin
  script(src='/assets/paperDashboardPro/js/sweetalert2.js')
  // Vector Map plugin
  script(src='/assets/paperDashboardPro/js/jquery-jvectormap.js')
  // Wizard Plugin
  script(src='/assets/paperDashboardPro/js/jquery.bootstrap.wizard.min.js')
  // Bootstrap Table Plugin
  script(src='/assets/paperDashboardPro/js/bootstrap-table.js')
  // Plugin for DataTables.net
  script(src='/assets/paperDashboardPro/js/jquery.datatables.js')
  // Full Calendar Plugin
  script(src='/assets/paperDashboardPro/js/fullcalendar.js')
  script(src='/assets/paperDashboardPro/js/scheduler.js')
  // Paper Dashboard PRO Core javascript and methods for Demo purpose
  script(src='/assets/paperDashboardPro/js/paper-dashboard.js')
  // Sharrre Library
  script(src='/assets/paperDashboardPro/js/jquery.sharrre.js')
  // Paper Dashboard PRO DEMO methods, don't include it in your project!
  script(src='/assets/paperDashboardPro/js/demo.js')
  script(type='text/javascript').
    $(document).ready(function(){
    demo.initOverviewDashboard();
    demo.initCirclePercentage();
    });
  script.
   $(document).ready(function(){
        $('.checkbox').on('change.bootstrapSwitch', function(e){
          if(e.target.checked==true)
          {
            var qnty
            var y=$(this).val()
            var price = document.getElementById(y).value
            var quantity = prompt("Quantity")

            if (quantity==null || quantity=="")
            {
              e.target.checked=false;
            }
            else
            {
              $(`.quantity[service_id='${y}']`).text(quantity)
              total = quantity * price;
            }
              $(`.total[service_id='${y}']`).text(total.toLocaleString())
              computeGrandTotal()
          }


          else if(e.target.checked==false)
          {
            var y=$(this).val()
            var total = $(`.total[service_id='${y}']`).text()
            var grandTotal = $('#grandtotal').text()
            var finalTotal = grandTotal.replace(/,/g,"") - total.replace(/,/g,"")
            $(`.quantity[service_id='${y}']`).text("0")
            $(`.total[service_id='${y}']`).text("0.00")
            $('#grandtotal').text(finalTotal.toLocaleString())
          }
        })
        function computeGrandTotal(){
          var totals = $('.total')
          var pinakaTotal = 0;
          for(var i =0;i<totals.length;i++){
            pinakaTotal = eval(pinakaTotal+"+"+totals[i].textContent.replace(/,/g,""));
          }
          $('#grandtotal').text(pinakaTotal.toLocaleString())
        }
   })
  script(type='text/javascript').
    $(document).ready(function() {
    $('#datatables').DataTable({"lengthMenu": [[5, 25, 50, -1], [5, 25, 50, "All"]]});
    });
  script.
    $().ready(function(){
      $('#registerFormValidation').validate();
      $('#loginFormValidation').validate();
      $('#allInputsFormValidation').validate();
        });
  
  
  script.
    $(document).ready(function(){
      var quantity = $('#quantity').val()
      if(quantity==0)
      {
        $('#therapist').attr("disabled",true)
      }

        
      $('.buttonAdd').click(function(){
        var quantity = $('#quantity').val()
        $('#therapist').attr("disabled",false)
        $('#therapist').selectpicker({
          style: 'btn-info',
          size: 4,
          maxOptions: quantity
      });
      })
      $('.buttonMinus').click(function(){
        var quantity = $('#quantity').val()
       $('#therapist').selectpicker({
          style: 'btn-info',
          size: 4,
          maxOptions: quantity
      });
      })
    })
  
  
  
  
  script.
        //plugin bootstrap minus and plus
    //http://jsfiddle.net/laelitenetwork/puJ6G/
    $('.btn-number').click(function(e){
        e.preventDefault();
        
        fieldName = $(this).attr('data-field');
        type      = $(this).attr('data-type');
        var input = $("input[name='"+fieldName+"']");
        var currentVal = parseInt(input.val());
        if (!isNaN(currentVal)) {
            if(type == 'minus') {
                
                if(currentVal > input.attr('min')) {
                    input.val(currentVal - 1).change();
                } 
                if(parseInt(input.val()) == input.attr('min')) {
                    $(this).attr('disabled', true);
                }

            } else if(type == 'plus') {

                if(currentVal < input.attr('max')) {
                    input.val(currentVal + 1).change();
                }
                if(parseInt(input.val()) == input.attr('max')) {
                    $(this).attr('disabled', true);
                }

            }
        } else {
            input.val(0);
        }
    });
    $('.input-number').focusin(function(){
      $(this).data('oldValue', $(this).val());
    });
    $('.input-number').change(function() {
        
        minValue =  parseInt($(this).attr('min'));
        maxValue =  parseInt($(this).attr('max'));
        valueCurrent = parseInt($(this).val());
        
        name = $(this).attr('name');
        if(valueCurrent >= minValue) {
            $(".btn-number[data-type='minus'][data-field='"+name+"']").removeAttr('disabled')
        } else {
            alert('Sorry, the minimum value was reached');
            $(this).val($(this).data('oldValue'));
        }
        if(valueCurrent <= maxValue) {
            $(".btn-number[data-type='plus'][data-field='"+name+"']").removeAttr('disabled')
        } else {
            alert('Sorry, the maximum value was reached');
            $(this).val($(this).data('oldValue'));
        }
        
            
        });
        $(".input-number").keydown(function (e) {
                // Allow: backspace, delete, tab, escape, enter and .
                if ($.inArray(e.keyCode, [46, 8, 9, 27, 13, 190]) !== -1 ||
                    // Allow: Ctrl+A
                    (e.keyCode == 65 && e.ctrlKey === true) || 
                    // Allow: home, end, left, right
                    (e.keyCode >= 35 && e.keyCode <= 39)) {
                        // let it happen, don't do anything
                        return;
                }
                // Ensure that it is a number and stop the keypress
                if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {
                    e.preventDefault();
                }
          });
  
  script.
    $(document).ready(function(){
      $('.btnNext1').click(function(){
        $('.1st').removeClass('active')
        $('.2nd').addClass('active')
      })



      $('.btnNext2').click(function(){
        $('.2nd').removeClass('active')
        $('.3rd').addClass('active')
      })
      $('.btnBack2').click(function(){
        $('.2nd').removeClass('active')
        $('.1st').addClass('active')
      })


      $('.btnBack3').click(function(){
        $('.3rd').removeClass('active')
        $('.2nd').addClass('active')
      })
      $.post('reservation/query').done(data=>{
                for(var i=0; i<data.length;i++){
              $('#calendar').fullCalendar('addResource', {
              id: data[i].room_id,
              title: data[i].room_name,
              occupancy: data[i].bed_qty
                        })
                }
       })
    $('#calendar').fullCalendar({ 
      themeSystem: 'bootstrap4',
      height: "auto",
      nowIndicator: true,
      schedulerLicenseKey: 'GPL-My-Project-Is-Open-Source',
      header: {
      left: 'today prev,next',
      center: 'title',
      right: 'timelineDay,timelineWeek'
    },
    defaultView: 'timelineDay',
    resourceColumns: [
      {
        labelText: 'Room Name',
        field: 'title'
      },
      {
        labelText: 'Bed Quantity',
        field: 'occupancy'
      }
    ],
    resources: 
       [
      
       ],
    businessHours: {
        // days of week. an array of zero-based day of week integers (0=Sunday)
        dow: [ 1, 2, 3, 4, 5, 6, 7 ], // Monday - Thursday

        start: '13:00', // a start time (10am in this example)
        end: '01:00', // an end time (6pm in this example)
      }
    });
    })
  script.
    $(document).ready(function() {
      var interval = setInterval(function() {
          var momentNow = moment();
          $('#date-part').html(momentNow.format('YYYY MMMM DD') + ' '
                              + momentNow.format('dddd')
                              .substring(0,3).toUpperCase());
          $('#time-part').html(momentNow.format('A hh:mm:ss'));
      }, 100);
      
      $('#stop-interval').on('click', function() {
          clearInterval(interval);
      });
      });