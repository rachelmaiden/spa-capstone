doctype html
html(lang='en')
  head
    meta(charset='utf-8')
    link(rel='apple-touch-icon', sizes='76x76', href='../paperDashboardPro/img/apple-icon.png')
    link(rel='icon', type='image/png', sizes='96x96', href='../paperDashboardPro/img/favicon.png')
    meta(http-equiv='X-UA-Compatible', content='IE=edge,chrome=1')
    title Online Booking and Spa Management System
    // Canonical SEO
    link(rel='canonical', href='http://www.creative-tim.com/product/paper-dashboard-pro')
    meta(content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0', name='viewport')
    meta(name='viewport', content='width=device-width')
    // Social tags
    meta(name='keywords', content='creative tim, html dashboard, html css dashboard, web dashboard, bootstrap dashboard, bootstrap, css3 dashboard, bootstrap admin, paper bootstrap dashboard, frontend, responsive bootstrap dashboard')
    meta(name='description', content='Paper Dashboard PRO is a beautiful Bootstrap admin dashboard with a large number of components, designed to look neat and organised. ')
    // Schema.org markup for Google+
    meta(itemprop='name', content='Paper Dashboard PRO by Creative Tim')
    meta(itemprop='description', content='Paper Dashboard PRO is a beautiful Bootstrap admin dashboard with a large number of components, designed to look neat and organised. If you are looking for a tool to manage and visualise data about your business, this dashboard is the thing for you.')
    meta(itemprop='image', content='http://s3.amazonaws.com/creativetim_bucket/products/47/original/opt_pdp_thumbnail.jpg')
    // Twitter Card data
    meta(name='twitter:card', content='summary_large_image')
    meta(name='twitter:site', content='@creativetim')
    meta(name='twitter:title', content='Paper Dashboard PRO by Creative Tim')
    meta(name='twitter:description', content='Paper Dashboard PRO is a beautiful Bootstrap admin dashboard with a large number of components, designed to look neat and organised.')
    meta(name='twitter:creator', content='@creativetim')
    meta(name='twitter:image', content='http://s3.amazonaws.com/creativetim_bucket/products/47/original/opt_pdp_thumbnail.jpg')
    // Open Graph data
    meta(property='og:title', content='Paper Dashboard PRO by Creative Tim')
    meta(property='og:type', content='article')
    meta(property='og:url', content='http://demos.creative-tim.com/paper-dashboard-pro/examples/dashboard/overview.html')
    meta(property='og:image', content='http://s3.amazonaws.com/creativetim_bucket/products/47/original/opt_pdp_thumbnail.jpg')
    meta(property='og:description', content='Paper Dashboard PRO is a beautiful Bootstrap admin dashboard with a large number of components, designed to look neat and organised.')
    meta(property='og:site_name', content='Creative Tim')
    // Bootstrap core CSS
    link(href='/assets/paperDashboardPro/css/bootstrap.min.css', rel='stylesheet')
    // Paper Dashboard core CSS
    link(href='/assets/paperDashboardPro/css/paper-dashboard.css', rel='stylesheet')
    // CSS for Demo Purpose, don't include it in your project
    link(href='/assets/paperDashboardPro/css/demo.css', rel='stylesheet')
    // Fonts and icons
    link(href='http://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css', rel='stylesheet')
    link(href='https://fonts.googleapis.com/css?family=Muli:400,300', rel='stylesheet', type='text/css')
    link(href='/assets/paperDashboardPro/css/themify-icons.css', rel='stylesheet')
  body
    nav.navbar.navbar-transparent.navbar-absolute
      .container
        .navbar-header
          button.navbar-toggle(type='button', data-toggle='collapse', data-target='#navigation-example-2')
            span.sr-only Toggle navigation
            span.icon-bar
            span.icon-bar
            span.icon-bar
        .collapse.navbar-collapse
          ul.nav.navbar-nav.navbar-left
            li
              a.h5(data-toggle="modal" data-target="#Home" style="color: white") Online Reservation and Spa Management System
          ul.nav.navbar-nav.navbar-right
            li
              h5(style="color: white") Current Date: 
                span
                script.
                  document.write(date)
                  var date = new Date().getMonth()
    .wrapper.wrapper-full-page
      .full-page.login-page(data-color='black', style=("background-image: url('/assets/paperDashboardPro/img/pinkspa.jpg'); background-size: cover; background-repeat: no-repeat"))
        // you can change the color of the filter page using: data-color="blue | azure | green | orange | red | purple"
        .content
          .container
            .row
              .col-md-2.col-sm-1.col-md-offset-0.col-sm-offset-1
                .card(style="width: 80em; bottom: 30px")
                  form#allInputsFormValidation(action='#', method='#', novalidate='novalidate')
                    .card-header
                      each customer in customers
                        center
                          h4.card-title= `Walkin Customer: ${customer.cust_fname} ${customer.cust_mname} ${customer.cust_lname}`
                      h5 Reservation Date: 
                        span= `${date}`
                      hr 
                    .card-content
                      .row
                        .col-md-2
                          .form-group
                            label.control-label
                              | Number of Guest
                              star *

                            .input-group
                              span.input-group-btn
                                button.btn.btn-info.btn-number(type='button', disabled='disabled', data-type='minus', data-field='quant[1]')
                                  span.ti-minus
                              input.form-control.input-number(type='text', name='quant[1]', value='1', min='1', max='6')
                              span.input-group-btn
                                button.btn.btn-info.btn-number(type='button', data-type='plus', data-field='quant[1]')
                                  span.ti-plus
                          span.help-block Guest can be 1 to 6
                        .col-md-3
                          .form-group
                            label.control-label
                              | Preferred Therapist
                              star *
                            select.form-control(name='gender' id="gender")
                              option(selected='', disabled='') - Therapist -
                              each therapist in therapists
                                option(value=`${therapist.therapist_id}`)= `${therapist.therapist_fname} ${therapist.therapist_lname}`
                            span.help-block This will be a remark only
                        .col-md-3
                          .form-group
                            label.control-label
                              | Room 
                              star *
                            select.form-control(name='room' id="room")
                              option(selected='', disabled='') - Room -
                                each room in rooms
                                  option(value=`${room.room_id}`)= room.room_name
                        .col-md-3
                          .form-group
                            label.control-label
                              | Time 
                              star *
                            //- select.form-control(name='room' id="room")
                            //-   option(selected='', disabled='') - Room -
                            //-   each room in rooms
                            //-     option(value=`${room.room_id}`)= room.room_name
                         

                      hr
                      .row
                        .col-md-12
                            label.control-label
                              | Services
                              star *
                            .card-content
                              
                              .toolbar
                                // Here you can write extra buttons/actions for the toolbar
                              .fresh-datatables
                                table#datatables.table.table-no-bordered.table-hover(cellspacing='0', width='100%', style='width:100%')
                                  thead
                                    tr
                                      th 
                                      th Type
                                      th Name
                                      th Price
                                      th Quantity
                                      th Total
                                  tfoot
                                    tr
                                      th
                                      th Type
                                      th Name
                                      th Price
                                      th Quantity
                                      th Total
                                  tbody
                                    each service in services
                                      tr
                                        td
                                          input.checkbox(type='checkbox' value=`${service.service_id}`)                             
                                        td= service.service_type_desc
                                        td= service.service_name+ " "+ "(" +service.service_duration_desc+")"
                                        td
                                          input(type="hidden" id=`${service.service_id}` value=`${service.service_price}`)
                                          span= service.service_price
                                        td 
                                          span.quantity(service_id=`${service.service_id}`) 0

                                        td 
                                          span.total(service_id=`${service.service_id}`) 0.00
                                h4(style="margin-left: 40em" id="grandtotal") Total 0.00


                      hr
                      .row
                                  

                    hr
                    .card-footer.text-center
                      button.btn.btn-info.btn-fill.btn-wd(type='submit') Book



        footer.footer.footer-transparent
          .container
            .copyright
              | © 
              script.
                document.write(new Date().getFullYear())
              | , made with 
              i.fa.fa-heart.heart
              |  by 
              a(href='') Team RJPC

                       
  // Core JS Files. Extra: TouchPunch for touch library inside jquery-ui.min.js
  script(src='/assets/paperDashboardPro/js/jquery-3.1.1.min.js', type='text/javascript')
  script(src='/assets/paperDashboardPro/js/jquery-ui.min.js', type='text/javascript')
  script(src='/assets/paperDashboardPro/js/perfect-scrollbar.min.js', type='text/javascript')
  script(src='/assets/paperDashboardPro/js/bootstrap.min.js', type='text/javascript')
  // Forms Validations Plugin
  script(src='/assets/paperDashboardPro/js/jquery.validate.min.js')
  // Promise Library for SweetAlert2 working on IE
  script(src='/assets/paperDashboardPro/js/es6-promise-auto.min.js')
  // Plugin for Date Time Picker and Full Calendar Plugin
  script(src='/assets/paperDashboardPro/js/moment.min.js')
  // Date Time Picker Plugin is included in this js file
  script(src='/assets/paperDashboardPro/js/bootstrap-datetimepicker.js')
  // Select Picker Plugin
  script(src='/assets/paperDashboardPro/js/bootstrap-selectpicker.js')
  // Switch and Tags Input Plugins
  script(src='/assets/paperDashboardPro/js/bootstrap-switch-tags.js')
  // Circle Percentage-chart
  script(src='/assets/paperDashboardPro/js/jquery.easypiechart.min.js')
  // Charts Plugin
  script(src='/assets/paperDashboardPro/js/chartist.min.js')
  // Notifications Plugin
  script(src='/assets/paperDashboardPro/js/bootstrap-notify.js')
  // Sweet Alert 2 plugin
  script(src='/assets/paperDashboardPro/js/sweetalert2.js')
  // Vector Map plugin
  script(src='/assets/paperDashboardPro/js/jquery-jvectormap.js')
  // Google Maps Plugin
  script(src='https://maps.googleapis.com/maps/api/js?key=AIzaSyAFPQibxeDaLIUHsC6_KqDdFaUdhrbhZ3M')
  // Wizard Plugin
  script(src='/assets/paperDashboardPro/js/jquery.bootstrap.wizard.min.js')
  // Bootstrap Table Plugin
  script(src='/assets/paperDashboardPro/js/bootstrap-table.js')
  // Plugin for DataTables.net
  script(src='/assets/paperDashboardPro/js/jquery.datatables.js')
  // Full Calendar Plugin
  script(src='/assets/paperDashboardPro/js/fullcalendar.min.js')
  // Paper Dashboard PRO Core javascript and methods for Demo purpose
  script(src='/assets/paperDashboardPro/js/paper-dashboard.js')
  // Sharrre Library
  script(src='/assets/paperDashboardPro/js/jquery.sharrre.js')
  // Paper Dashboard PRO DEMO methods, don't include it in your project!
  script(src='/assets/paperDashboardPro/js/demo.js')
  script(type='text/javascript').
    $(document).ready(function(){
    demo.initOverviewDashboard();
    demo.initCirclePercentage();
    });
  script.
   $(document).ready(function(){
        $('.checkbox').on('change.bootstrapSwitch', function(e){
          if(e.target.checked==true)
          {
            var qnty
            var y=$(this).val()
            var price = document.getElementById(y).value
            var quantity = prompt("Quantity")

            if (quantity==null || quantity=="")
            {
              e.target.checked=false;
            }
            else
            {
              $(`.quantity[service_id='${y}']`).text(quantity)
              total = quantity * price;
            }
              $(`.total[service_id='${y}']`).text(total.toLocaleString())
              computeGrandTotal()
          }


          else if(e.target.checked==false)
          {
            var y=$(this).val()
            var total = $(`.total[service_id='${y}']`).text()
            var grandTotal = $('#grandtotal').text()
            var finalTotal = grandTotal.replace(/,/g,"") - total.replace(/,/g,"")
            $(`.quantity[service_id='${y}']`).text("0")
            $(`.total[service_id='${y}']`).text("0.00")
            $('#grandtotal').text(finalTotal.toLocaleString())
          }
        })
        function computeGrandTotal(){
          var totals = $('.total')
          var pinakaTotal = 0;
          for(var i =0;i<totals.length;i++){
            pinakaTotal = eval(pinakaTotal+"+"+totals[i].textContent.replace(/,/g,""));
          }
          $('#grandtotal').text(pinakaTotal.toLocaleString())
        }
   })
  script(type='text/javascript').
    $(document).ready(function() {
    $('#datatables').DataTable();
    });
  script.
    $().ready(function(){
      $('#registerFormValidation').validate();
      $('#loginFormValidation').validate();
      $('#allInputsFormValidation').validate();
        });
  
  script.
        //plugin bootstrap minus and plus
    //http://jsfiddle.net/laelitenetwork/puJ6G/
    $('.btn-number').click(function(e){
        e.preventDefault();
        
        fieldName = $(this).attr('data-field');
        type      = $(this).attr('data-type');
        var input = $("input[name='"+fieldName+"']");
        var currentVal = parseInt(input.val());
        if (!isNaN(currentVal)) {
            if(type == 'minus') {
                
                if(currentVal > input.attr('min')) {
                    input.val(currentVal - 1).change();
                } 
                if(parseInt(input.val()) == input.attr('min')) {
                    $(this).attr('disabled', true);
                }

            } else if(type == 'plus') {

                if(currentVal < input.attr('max')) {
                    input.val(currentVal + 1).change();
                }
                if(parseInt(input.val()) == input.attr('max')) {
                    $(this).attr('disabled', true);
                }

            }
        } else {
            input.val(0);
        }
    });
    $('.input-number').focusin(function(){
      $(this).data('oldValue', $(this).val());
    });
    $('.input-number').change(function() {
        
        minValue =  parseInt($(this).attr('min'));
        maxValue =  parseInt($(this).attr('max'));
        valueCurrent = parseInt($(this).val());
        
        name = $(this).attr('name');
        if(valueCurrent >= minValue) {
            $(".btn-number[data-type='minus'][data-field='"+name+"']").removeAttr('disabled')
        } else {
            alert('Sorry, the minimum value was reached');
            $(this).val($(this).data('oldValue'));
        }
        if(valueCurrent <= maxValue) {
            $(".btn-number[data-type='plus'][data-field='"+name+"']").removeAttr('disabled')
        } else {
            alert('Sorry, the maximum value was reached');
            $(this).val($(this).data('oldValue'));
        }
        
            
        });
        $(".input-number").keydown(function (e) {
                // Allow: backspace, delete, tab, escape, enter and .
                if ($.inArray(e.keyCode, [46, 8, 9, 27, 13, 190]) !== -1 ||
                    // Allow: Ctrl+A
                    (e.keyCode == 65 && e.ctrlKey === true) || 
                    // Allow: home, end, left, right
                    (e.keyCode >= 35 && e.keyCode <= 39)) {
                        // let it happen, don't do anything
                        return;
                }
                // Ensure that it is a number and stop the keypress
                if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {
                    e.preventDefault();
                }
            });
