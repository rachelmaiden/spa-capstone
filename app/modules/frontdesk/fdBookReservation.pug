doctype html
html(lang='en')
  head
    meta(charset='utf-8')
    link(rel='apple-touch-icon', sizes='76x76', href='../paperDashboardPro/img/apple-icon.png')
    link(rel='icon', type='image/png', sizes='96x96', href=`/upload/${reqSession.utilities[0].company_logo}`)
    meta(http-equiv='X-UA-Compatible', content='IE=edge,chrome=1')
    title #{reqSession.utilities[0].company_name}
    // Canonical SEO
    link(rel='canonical', href='http://www.creative-tim.com/product/paper-dashboard-pro')
    meta(content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0', name='viewport')
    meta(name='viewport', content='width=device-width')
    // Bootstrap core CSS
    link(href='/assets/paperDashboardPro/css/bootstrap.min.css', rel='stylesheet')
    // Paper Dashboard core CSS
    link(href='/assets/paperDashboardPro/css/paper-dashboard.css', rel='stylesheet')
    // CSS for Demo Purpose, don't include it in your project
    link(href='/assets/paperDashboardPro/css/demo.css', rel='stylesheet')
    // Fonts and icons
    link(href='http://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css', rel='stylesheet')
    link(href='https://fonts.googleapis.com/css?family=Muli:400,300', rel='stylesheet', type='text/css')
    link(href='/assets/paperDashboardPro/css/themify-icons.css', rel='stylesheet')
    style.
      button.hello{
        background:none!important;
        border:none; 
        padding:0!important;
        
        /*optional*/
        font-family:arial,sans-serif; /*input has OS specific font-family*/
        color:#069;
        text-decoration:underline;
        cursor:pointer;
      }
  body.sidebar-mini
    .wrapper
      .sidebar(data-active-color='spa', style='color: white')
        //
          Tip 1: you can change the color of the sidebar's background using: data-background-color="white | brown"
          Tip 2: you can change the color of the active button using the data-active-color="primary | info | success | warning | danger"
        .logo
          a.simple-text.logo-mini(href='#')
            | FD
          a.simple-text.logo-normal(href='#')
            | #{reqSession.utilities[0].company_name}
        .sidebar-wrapper
          .user
            .info
              
              a.collapsed(data-toggle='collapse', href='#collapseExample' style='left: 50px')
                span
                  | Front Desk
              .clearfix
          ul.nav
            li
              a(href='./frontdesk/home')
                i.ti-pencil
                p
                  | Registration
            li.active
              a(href='./fdReservation')
                i.ti-calendar
                p
                  | Reservation
            li
              a(href='#')
                i.ti-credit-card
                p
                  | Payment      
      .main-panel
        nav.navbar.navbar-default
          .container-fluid
            .navbar-minimize

            .navbar-header

              a.navbar-brand(href='#')
                | New Reservation
            .collapse.navbar-collapse
             
              ul.nav.navbar-nav.navbar-right
                li
                  a#date-part(style="color: black")
                li
                  a#time-part(style="color: black") 
                li
                  a.logout(style="cursor: pointer; color: black") Log Out
        .content
          .col-lg-12.col-md-12
            .card(style='height: 75em')
              .card-header
                each customer in customers
                  input.restype(type="hidden" id="restype" value=`${restype}`)
                  h4
                    strong#name= "Name: "+ customer.cust_fname+" "+customer.cust_mname+" "+customer.cust_lname
                    input(type="hidden" value=`${customer.cust_id}` id='customerId')
                    br
                    strong#gender= "Gender: "+ customer.cust_gender
                    br
                    if(restype=='single')
                      strong= "Medical History: "+customer.medical_history
                    else
                    
                  h4
                    strong#date= `Date: ${date}`
                    input(type="hidden" value=`${date}` id='dateRes')
                    br
                    strong#time= `Time: ${time}`
                    input(type="hidden" value=`${time}`)
                    br
                    strong End Time: 
                      a(id='totalDuration') 0  
                br
                input(type='hidden' value=`${male}` id='male')
                br
                input.female(type='hidden' value=`${female}` id='female')
                input(type='hidden' value=`${roomId}` id='roomId')              


              .card-content
                .nav-tabs-navigation
                  .nav-tabs-wrapper
                    ul#tabs.nav.nav-tabs(data-tabs='tabs')
                      li.active
                        a(href='#single', data-toggle='tab') Services
                      li
                        a(href='#packages', data-toggle='tab') Package
                      li
                        a(href='#promo', data-toggle='tab') Promo
                #my-tab-content.tab-content
                  #single.tab-pane.active
                    .content
                      .container-fluid
                        .row
                          .col-md-12
                            .card
                              .card-content
                                .toolbar
                                  // Here you can write extra buttons/actions for the toolbar
                                .fresh-datatables
                                  table#datatables.table.table-no-bordered.table-hover(cellspacing='0', width='100%', style='width:100%')
                                    thead
                                      tr
                                        th
                                        th
                                          strong  Services 
                                        th
                                          strong  Duration
                                        th
                                          strong Price
                                        th
                                          strong Quantity
                                        th
                                          strong Points
                                        th
                                          strong Total
                                        //- th.text-center.disable-sorting(data-field='therapist', style='margin-right: 50px')
                                        //-   strong Therapist
                                    tbody
                                      each service in services
                                        tr
                                          td
                                            input.checkbox(type='checkbox' value=`${service.service_id}`)
                                            
                                          td= service.service_name
                                            input.name(type='hidden' id= `${service.service_id}` value=`${service.service_name}`)
                                            input.id(type='hidden' id= `${service.service_id}` value=`${service.service_id}`)
                                          td= service.service_duration_desc+" minutes"
                                            input.duration(type='hidden' value=`${service.service_duration_desc}` id=`${service.service_id}`)
                                            input.bagongDuration(type='hidden' value="" id=`${service.service_id}`)
                                          td
                                            input.price(type="hidden" id=`${service.service_id}` value=`${service.service_price}`)
                                            span= service.service_price
                                          td
                                            span.quantity(service_id=`${service.service_id}`) 0
                                          
                                          input.points(type='hidden' id=`${service.service_id}` value=`${service.service_points}`)
                                          input.eqPoints(type='hidden' id=`${service.service_id}` value=`${service.equivalent_points}`)
                                          if(service.service_points==1|| service.service_points==0)
                                            td= service.service_points+" "+"Point"
                                          else if(service.service_points > 0)
                                            td= service.service_points+" "+"Points"
                                          td
                                            span.total(service_id=`${service.service_id}`) 0.00
                                      strong#room= `Room: ${room}`
                                        input(type='hidden' value=`${roomId}` id="roomId")

                            // end card
                          // end col-md-12
                        // end row
                  #packages.tab-pane
                    .content
                      .container-fluid
                        .row
                          .col-md-12
                            .card
                              .card-content
                                .toolbar
                                  // Here you can write extra buttons/actions for the toolbar
                                .fresh-datatables
                                  table#datatablesPackage.table.table-no-bordered.table-hover(cellspacing='0', width='100%', style='width:100%')
                                    thead
                                      tr
                                        th
                                        th
                                          strong  Packages 
                                        th
                                          strong  Duration
                                        th
                                          strong Price
                                        th
                                          strong Quantity
                                        th
                                          strong Points
                                        th
                                          strong Total
                                        //- th.text-center.disable-sorting(data-field='therapist', style='margin-right: 50px')
                                        //-   strong Therapist
                                    tbody
                                      each pack in packages
                                        tr
                                          td
                                            input.checkbox(type='checkbox' value=`${pack.package_id}`)
                                            
                                          td= pack.package_name
                                            input.name(type='hidden' id= `${pack.package_id}` value=`${pack.package_name}`)
                                            input.id(type='hidden' id= `${pack.package_id}` value=`${pack.package_id}`)
                                          td= pack.package_duration+" minutes"
                                            input.duration(type='hidden' value=`${pack.package_duration}` id=`${pack.package_id}`)
                                            input.bagongDuration(type='hidden' value="" id=`${pack.package_id}`)
                                          td
                                            input.price(type="hidden" id=`${pack.package_id}` value=`${pack.package_price}`)
                                            span= pack.package_price
                                          td
                                            span.quantity(service_id=`${pack.package_id}`) 0
                                          
                                          input.points(type='hidden' id=`${pack.package_id}` value=`${pack.package_points}`)
                                          if(pack.package_points==1|| pack.package_points==0)
                                            td= pack.package_points+" "+"Point"
                                          else if(pack.package_points > 0)
                                            td= pack.package_points+" "+"Points"
                                          td
                                            span.total(service_id=`${pack.package_id}`) 0.00
                                      strong#room= `Room: ${room}`
                                        input(type='hidden' value=`${roomId}` id="roomId")
                  #promo.tab-pane
                    .content
                      .container-fluid
                        .row
                          .col-md-12
                            .card
                              .card-content
                                .toolbar
                                  // Here you can write extra buttons/actions for the toolbar
                                .fresh-datatables
                                  table#datatablesPromo.table.table-no-bordered.table-hover(cellspacing='0', width='100%', style='width:100%')
                                    thead
                                      tr
                                        th
                                        th
                                          strong  Promos 
                                        th
                                          strong  Duration
                                        th
                                          strong Price
                                        th
                                          strong Quantity
                                        th
                                          strong Points
                                        th
                                          strong Total
                                        //- th.text-center.disable-sorting(data-field='therapist', style='margin-right: 50px')
                                        //-   strong Therapist
                                    tbody
                                      each promo in promos
                                        tr
                                          td
                                            input.checkbox(type='checkbox' value=`${promo.promobundle_id}`)
                                            
                                          td= promo.promobundle_name
                                            input.name(type='hidden' id= `${promo.promobundle_id}` value=`${promo.promobundle_name}`)
                                            input.id(type='hidden' id= `${promo.promobundle_id}` value=`${promo.promobundle_id}`)
                                          td= promo.promobundle_duration+" minutes"
                                            input.duration(type='hidden' value=`${promo.promobundle_duration}` id=`${promo.promobundle_id}`)
                                            input.bagongDuration(type='hidden' value="" id=`${promo.promobundle_id}`)
                                          td
                                            input.price(type="hidden" id=`${promo.promobundle_id}` value=`${promo.promobundle_price}`)
                                            span= promo.promobundle_price
                                          td
                                            span.quantity(service_id=`${promo.promobundle_id}`) 0
                                          
                                          input.points(type='hidden' id=`${promo.promobundle_id}` value=`${promo.promobundle_points}`)
                                          if(promo.promobundle_points==1|| promo.promobundle_points==0)
                                            td= promo.promobundle_points+" "+"Point"
                                          else if(promo.promobundle_points > 0)
                                            td= promo.promobundle_points+" "+"Points"
                                          td
                                            span.total(service_id=`${promo.promobundle_id}`) 0.00
                                      strong#room= `Room: ${room}`
                                        input(type='hidden' value=`${roomId}` id="roomId")
                h4
                  strong Total Price:  
                    a(id="grandtotal") 0.00 
                  br
                  strong Total Points: 
                    a(id="totalPoints") 0
              
                button.btn.btn-secondary.pull-left.btn.btn-danger.btn-fill.btn-wd(type='button', data-dismiss='modal') Cancel
                button.btn.btn-secondary.pull-right.btn.btn-info.btn-fill.btn-wd.buttonSummary(type='button') Reserve
        #reservationSummary.modal.fade(tabindex='-1', role='dialog')
          .modal-dialog.modal-lg(role='document')
            .modal-content
              .modal-header
                h3.modal-title
                  center Reservation Summary
                button.close(type='button', data-dismiss='modal', aria-label='Close')
              .modal-body
                .col-lg-12.col-md-12
                    h5
                      strong#Name= "Name: "
                      br
                      strong#Gender= "Gender: "
                      br
                      strong#Room= `Room:` 
                      br
                      strong#Date= `Date:`
                    .row
                      .form-group
                        .col-md-3
                          h5.category
                            strong#StartTime
                            input(type="hidden" value='' id="timeStart")
                        .col-md-3
                          h5.category
                            strong#EndTime
                            input(type="hidden" value='' id="timeEnd") 
                    .row
                      .form-group
                        .col-md-3
                          h5.category
                            strong Therapist
                    .row
                      if(restype=='single')
                          select.selectpicker(title='Select Therapist', data-style='btn-info', data-size='7' name='selected_therapist' id='selected_therapist' required='true' aria-label='true')
                            each thera in therapist
                              option(value=`${thera.therapist_id}`)= thera.therapist_fname+" "+thera.therapist_mname+" "+thera.therapist_lname
                      else if(restype=='multiple')
                          select.selectpicker(multiple='', title='Select Therapist', data-style='btn-info', data-size='7' name='selected_therapist' id='selected_therapist' required='true' aria-label='true')
                            each thera in therapist
                              option(value=`${thera.therapist_id}`)= thera.therapist_fname+" "+thera.therapist_mname+" "+thera.therapist_lname
                    h4 Total Price: 
                        a#finalTotal
                        br
                        | Total  Points: 
                        a#finalPoints
                .row
                    .col-md-12
                      .card-content
                        .toolbar
                        .fresh-datatables
                        table#datatables.table.table-no-bordered.table-hover(cellspacing='0', width='100%', style='width:100%')
                          thead
                            tr
                              th
                              th
                                strong  Services 
                              th
                                strong  Quantity
                              th
                                strong Duration
                              th
                                strong Total Price 
                          tbody#viewServices
                            
              .modal-footer
                button.btn.btn-secondary.pull-right.btn.btn-info.btn-fill.btn-wd.submitButton(type='button') Book
                button.btn.btn-secondary.pull-left.btn.btn-danger.btn-fill.btn-wd(type='button', data-dismiss='modal') Cancel

            // PAYNOW 
            #checkout.modal.fade(tabindex='-1', role='dialog' aria-labelledby='myModalLabel')
              .modal-dialog.modal-lg(role='document')
                .modal-content
                  .modal-header
                    h5.modal-title
                      center Summary
                    button.close(type='button', data-dismiss='modal', aria-label='Close')
                  .modal-body
                    div
                      h5
                        strong#custName
                        br
                        button.hello(type='' value='') Register for Loyalty Membership
                      h5
                        strong#Room
                        br
                        strong#RoomRate
                        hr
                    .fresh-datatables
                      table#datatables.table.table-no-bordered.table-hover(cellspacing='0', width='100%', style='width:100%')
                        thead
                          tr
                            th.disabled-sorting
                              strong Services Availed 
                            th.disabled-sorting Quantity
                            th.disabled-sorting Amount
                            th.disabled-sorting Equivalent Points
                        tfoot
                          tr
                            th.disabled-sorting
                            th
                            th
                            th
                        tbody#viewServicesAvailed
                            
                      div
                        h2
                          strong#TotalPrice
                          input.totalPrice(type='hidden' value='')
                        h4
                          strong#TotalPoints
                        .row
                          .col-md-4
                            .form-group.has-default.bmd-form-group
                              label Amount Received:
                              input.form-control.amountReceived(type='number', placeholder='Amount Received' oninput="myFunction()")
                          //- .col-md-4
                          //-   .form-group.has-default.bmd-form-group
                          //-     label Gift Certificate Amount:
                          //-     input.form-control(type='number', placeholder='Gift Certificate Amount')
                          .col-md-4
                            .form-group.has-default.bmd-form-group
                              label Change: 
                              input.form-control.change(type='number', placeholder='Change' value='0')
                          .col-md-4#appendDito
                    .modal-footer
                      button.btn.btn-secondary.pull-right.btn.btn-success.btn-fill.btn-wd.buttonDone(type='button') Done
                      button.btn.btn-secondary.pull-left.btn.btn-danger.btn-fill.btn-wd(type='button', data-dismiss='modal') Cancel
            //REGISTRATION
            #RegisterModal.modal.fade(tabindex='1', role='dialog' aria-labelledby='myModalLabel')
              .modal-dialog(role='document')
                .modal-content
                  .modal-header
                    h5.modal-title
                      center Registration
                    button.close(type='button', data-dismiss='modal', aria-label='Close')
                  .modal-body
                    .row
                      .col-md-4
                        .form-group
                          label.control-label Username
                          star *
                          input.form-control(type='text', name='username', id="username" placeholder='username\
                          ')
                      .col-md-4
                        .form-group
                          label.control-label Password
                          star *
                          input.form-control(type='password', name='password1', id="password" placeholder='password\
                          ')
                      .col-md-4
                        .form-group
                          label.control-label Re-enter Password
                          star *
                          input.form-control(type='password', name='password2', id="password2" placeholder='confim password\
                          ')

                    .row
                      .col-md-5
                          h5 Fee: 
                  .modal-footer
                    button.btn.btn-secondary.btn.btn-info.btn-fill.btn-wd.pull-right.buttonRegister(type='button', data-dismiss='modal') Done
                    button.btn.btn-secondary.btn.btn-danger.btn-fill.btn-wd.pull-left(type='button', data-dismiss='modal') Close
    .fixed-plugin
    // Core JS Files. Extra: TouchPunch for touch library inside jquery-ui.min.js
    script(src='/assets/paperDashboardPro/js/jquery-3.1.1.min.js', type='text/javascript')
    script(src='/assets/paperDashboardPro/js/jquery-ui.min.js', type='text/javascript')
    script(src='/assets/paperDashboardPro/js/perfect-scrollbar.min.js', type='text/javascript')
    script(src='/assets/paperDashboardPro/js/bootstrap.min.js', type='text/javascript')
    // Forms Validations Plugin
    script(src='/assets/paperDashboardPro/js/jquery.validate.min.js')
    // Promise Library for SweetAlert2 working on IE
    script(src='/assets/paperDashboardPro/js/es6-promise-auto.min.js')
    // Plugin for Date Time Picker and Full Calendar Plugin
    script(src='/assets/paperDashboardPro/js/moment.min.js')
    // Date Time Picker Plugin is included in this js file
    script(src='/assets/paperDashboardPro/js/bootstrap-datetimepicker.js')
    // Select Picker Plugin
    script(src='/assets/paperDashboardPro/js/bootstrap-selectpicker.js')
    // Switch and Tags Input Plugins
    script(src='/assets/paperDashboardPro/js/bootstrap-switch-tags.js')
    // Circle Percentage-chart
    script(src='/assets/paperDashboardPro/js/jquery.easypiechart.min.js')
    // Charts Plugin
    script(src='/assets/paperDashboardPro/js/chartist.min.js')
    // Notifications Plugin
    script(src='/assets/paperDashboardPro/js/bootstrap-notify.js')
    // Sweet Alert 2 plugin
    script(src='/assets/paperDashboardPro/js/sweetalert.js')
    // Vector Map plugin
    script(src='/assets/paperDashboardPro/js/jquery-jvectormap.js')
    // Wizard Plugin
    script(src='/assets/paperDashboardPro/js/jquery.bootstrap.wizard.min.js')
    // Bootstrap Table Plugin
    script(src='/assets/paperDashboardPro/js/bootstrap-table.js')
    // Plugin for DataTables.net
    script(src='/assets/paperDashboardPro/js/jquery.datatables.js')
    // Full Calendar Plugin
    script(src='/assets/paperDashboardPro/js/fullcalendar.min.js')
    // Paper Dashboard PRO Core javascript and methods for Demo purpose
    script(src='/assets/paperDashboardPro/js/paper-dashboard.js')
    // Sharrre Library
    script(src='/assets/paperDashboardPro/js/jquery.sharrre.js')
    // Paper Dashboard PRO DEMO methods, don't include it in your project!
    script(src='/assets/paperDashboardPro/js/demo.js')
    script.
      $('.buttonSummary').click(function(){

        var restype = $('.restype[id="restype"]').val()
        if(restype=='single')
        {
          var bed_quantity= 1
        }
        else if(restype='multiple')
        {
          var bed_occupied_boys = $('#male').val()
          var bed_occupied_girls = $('#female').val()
        }
        var table =$('#datatables').DataTable()
        var pagelength = table.page.info().pages
          table.page(0).draw()
        var idService =[]
        var serviceQuantity=[]
        var serviceNewDuration=[]
        var serviceTotal=[]
          for (var i=1;i<=pagelength;i++){
            $('.checkbox:checked').each(function(){
              var id = $(this).val()
              idService.push(id)
              serviceQuantity.push($(`.quantity[service_id='${id}'`).text())
              serviceNewDuration.push($(`.bagongDuration[id='${id}']`).val())
              serviceTotal.push($(`.total[service_id='${id}']`).text())
              var serviceId = $(`.id[id='${id}']`).val()
              var serviceName = $(`.name[id='${id}']`).val()
              var quantity= $(`.quantity[service_id='${id}'`).text()
              var totalPrice = $(`.total[service_id='${id}']`).text()
              var bagongDuration=$(`.bagongDuration[id='${id}']`).val()
              $('#viewServices').append(`
                <tr>
                <td>
                <input type='hidden' value="${serviceId}" id="serviceId"></input>
                </td> 
                <td>${serviceName}</td>
                <td>${quantity}
                </td>
                <td>${bagongDuration}
                </td>
                <td>${totalPrice}</td>
                `)
              $('#reservationSummary').on('hidden.bs.modal', function (){
                $('#viewServices').empty()
              })
            })
            table.page('next').draw('page');
          }


        $('#reservationSummary').modal('show')
        $('#reservationSummary').on('hidden.bs.modal', function (){
          var serviceQuantity = []
          var serviceNewDuration = []
          var serviceTotal = []
          var idService = []

        })
        
        var Name = $('#name').text()
        var Gender = $('#gender').text()
        var Room = $('#room').text()
        var Date = $('#date').text()
        var Time = moment($("#time").text(),"hh:mm A").format('hh:mm A')
        var EndTime = $('#totalDuration').text()
        var finalTotal = $('#grandtotal').text()
        var finalPoints = $('#totalPoints').text()
        $('#timeStart').val(Time)
        $('#timeEnd').val(EndTime)
        $('#Name').text(Name)
        $('#Gender').text(Gender)
        $('#Room').text(Room)
        $('#Date').text(Date)
        $('#StartTime').text("Start Time: "+Time)
        $('#EndTime').text("End Time: "+EndTime)
        $('#finalTotal').text(finalTotal)
        $('#finalPoints').text(finalPoints)

        $('.submitButton').click(function(){
          //- var finalTotal= $('#finalTotal').text().replace(/,/g,'')
          
          if(restype =='single')
          {
            if($('#selected_therapist').val()==0)
            {
              swal({
                title: 'Error',
                text: 'You must select therapist',
                icon: 'warning'
              })
            }
            else
            {
                swal({
                  title: 'Pay Now or Later?',
                  icon: 'info',
                  buttons: ['Pay Later',"Pay Now"],
                }).then(function(PayNow){
                  if(PayNow)
                  {
                    $('#Room').append(`Room: ${Room}`)
                    $('#RoomRate').append(`Room Rate: `)

                    $.post('./CheckCustomer/Details',{
                      cust_id: $('#customerId').val()
                    }).done(function(data){
                      console.log(data)
                      $('#checkout').modal('show')
                      //- if(data[0].cust_type==0)
                      //- {
                      //-   $('#TotalPrice').append(`Total: ${total_amount}`)
                      //-   $('.totalPrice').val(`${total_amount}`)
                      //- }
                      //- else if (data.out2.paid_status==0)
                      //- {
                      //-   $('#TotalPrice').append(`Total: ${data.out2.walkin_total_amount}`)
                      //-   $('.totalPrice').val(`${data.out2.walkin_total_amount}`)
                      //- }
                      //- else
                      //- {
                      //-   $('#TotalPrice').append(`Total: ${data.out2.walkin_total_amount}`)
                      //-   $('.totalPrice').val(`${data.out2.walkin_total_amount}`)
                      //- }
                      
                        $('#TotalPoints').append(`Total Points to be earned: ${finalPoints}`)
                        $('.hello').val(data[0].cust_id)
                      if(data[0].cust_type==0)
                      {
                      }
                      else
                      {
                          $('.hello').addClass('hidden')
                          $('#appendDito').append(`
                            <div class="form-group has-default bmd-form-group">
                            <label> Current Points: ${data.out2.member_points}
                              <div class="checkbox">
                                <input id="checkbox1" type="checkbox"/>
                                <label for="checkbox1">Pay using Points</label>
                              </div>
                          </div>`)
                      }

                      $('#custName').append(`Customer Name: ${data[0].cust_fname} ${data[0].cust_mname} ${data[0].cust_lname}`)
                          var table =$('#datatables').DataTable()
                          var pagelength = table.page.info().pages
                        for (var i=1;i<=pagelength;i++){
                              $('.checkbox:checked').each(function(){
                                var id = $(this).val()
                                idService.push(id)
                                serviceQuantity.push($(`.quantity[service_id='${id}'`).text())
                                serviceNewDuration.push($(`.bagongDuration[id='${id}']`).val())
                                serviceTotal.push($(`.total[service_id='${id}']`).text())
                                var serviceId = $(`.id[id='${id}']`).val()
                                var serviceName = $(`.name[id='${id}']`).val()
                                var quantity= $(`.quantity[service_id='${id}'`).text()
                                var totalPrice = $(`.total[service_id='${id}']`).text()
                                var bagongDuration=$(`.bagongDuration[id='${id}']`).val()
                                $('#viewServicesAvailed').append(`
                                  <tr>
                                  <td>${serviceName}</td>
                                  <td>${quantity}
                                  </td>
                                  <td>${bagongDuration}
                                  </td>
                                  <td>${totalPrice}</td>
                                  `)
                                $('#reservationSummary').on('hidden.bs.modal', function (){
                                  $('#viewServices').empty()
                                })
                              })
                    table.page('next').draw('page');
                            }

                    })
                    $('#checkout').on('hidden.bs.modal', function (){
                  $('#viewServicesAvailed').empty()
                  $('#custName').empty()
                  $('#TotalPrice').empty()
                  $('.totalPrice').empty()  
                  $('#TotalPoints').empty()
                })
                  
                
                
                
                $('.buttonDone').click(function(){
                  alert($('.amountReceived').val())
                  alert($('.totalPrice').val())
                  alert(1000 < 800)
                  if($('.amountReceived').val()==0)
                    {
                      swal({
                        title: "Amount Received is 0",
                        icon: 'warning'
                      })
                    }
                  else if(parseInt($('.amountReceived').val()) < parseInt($('.totalPrice').val()))
                    {
                      swal({
                        title: "Amount Received is insufficient",
                        icon: 'warning'
                      })
                    }
                  else
                    {
                  $.post('/payment/Finish',{
                    id:id,
                    amount: $('.totalPrice').val(),
                    cust_id: $('.hello').val() 
                    }).done(function(data){
                      if(data.alertDesc==0)
                        {
                          swal({
                            title: "Success",
                            icon: 'success'
                          }).then(function(){
                            location.reload()
                          })
                        }
                      else
                        {
                          swal({
                            title: "ERROR",
                            icon: 'error'
                          })
                        }
                    
                    })
                    }
                })

                  }
                  else
                  {
                    alert('PayLater')
                  }
                })
              //-   $.post('/bookreservation/addReservation',{
              //-   customerId :$('#customerId').val(),
              //-   serviceId: idService,
              //-   serviceQuantity: serviceQuantity,
              //-   serviceNewDuration: serviceNewDuration,
              //-   serviceTotal: serviceTotal,
              //-   bed_quantity: bed_quantity,
              //-   therapist_id: $('#selected_therapist').val(),
              //-   timeStart : $('#timeStart').val(),
              //-   timeEnd: $('#timeEnd').val(),
              //-   date : $('#dateRes').val(),
              //-   finalTotal : $('#finalTotal').text().replace(/,/g,''),
              //-   finalPoints : $('#finalPoints').text().replace(/,/g,''),
              //-   roomId :$('#roomId').val()
              //- }).done(function(data){
              //-   if(data.alertDesc==1)
              //-   {
              //-   swal({
              //-     title:'Success', 
              //-     text:'New Reservation Added', 
              //-     icon:'success'
              //-     }).then(function(){
              //-       location.href='/frontdesk/home'
              //-     })
              //- }
              //- else
              //-   {
              //-     swal({
              //-       title:'Not Success', 
              //-       text:'', 
              //-       icon:'warning'
              //-       })
              //-   } 
              //- })
            }
          }
      //-     else if(restype=='multiple')
      //-     {            
      //-     $.post('/bookreservation/addReservation',{
      //-       customerId :$('#customerId').val(),
      //-       serviceId: idService,
      //-       serviceQuantity: serviceQuantity,
      //-       serviceNewDuration: serviceNewDuration,
      //-       serviceTotal: serviceTotal,
      //-       bed_quantity: bed_quantity,
      //-       boys_quantity: bed_occupied_boys,
      //-       girls_quantity: bed_occupied_girls,
      //-       timeStart : $('#timeStart').val(),
      //-       timeEnd: $('#timeEnd').val(),
      //-       date : $('#dateRes').val(),
      //-       finalTotal : $('#finalTotal').text().replace(/,/g,''),
      //-       finalPoints : $('#finalPoints').text().replace(/,/g,''),
      //-       roomId :$('#roomId').val()
      //-      }).done(function(data){
      //-        if(data.alertDesc==1)
      //-        {
      //-       swal({
      //-         title:'Success', 
      //-         text:'New Reservation Added', 
      //-         icon:'success'
      //-         }).then(function(){
      //-           location.href='/frontdesk/home'
      //-         })
      //-     }
      //-     else
      //-       {
      //-         swal({
      //-           title:'Not Success', 
      //-           text:'', 
      //-           icon:'warning'
      //-           })
      //-       }
      //-      })
      //-     }
      //- })
      })
      })
    script.
      $(document).ready(function(){
        $('.checkbox').on('change.bootstrapSwitch', function(e){
          if(e.target.checked==true)
          {
            var id = $(this).val()
            var service_name = $(`.name[id='${id}']`).val()
            var qnty
            var y=$(this).val()
            var price = $(`.price[id='${y}']`).val()
            var hours = Math.floor( $(`.duration[id='${y}']`).val() / 60);          
            var minutes = $(`.duration[id='${y}']`).val() % 60;
            var points = $(`.points[id='${y}']`).val()
            var duration = $(`.duration[id='${y}']`).val()
            swal({
              title: service_name,
              icon: "info",
              content: "input",
              buttons: [true,"Confirm"],
              dangerMode: true,
            }).then(function(quantity){
              $('.swal-content__input').attr('type', 'number')
              var quantity = $('.swal-content__input').val()
              if (quantity==null || quantity=="")
              {
                e.target.checked=false;
              }
              else
              {
                $(`.quantity[service_id='${y}']`).text(quantity)
                total = quantity * price;
              
                $(`.total[service_id='${y}']`).text(total.toLocaleString())
                var table=$('#datatables').DataTable()
                table.search('').draw()
              }

            })
          }

          else if(e.target.checked==false)
          {
            var y=$(this).val()
            var total = $(`.total[service_id='${y}']`).text()
            var grandTotal = $('#grandtotal').text()
            var finalTotal = grandTotal.replace(/,/g,"") - total.replace(/,/g,"")
            $(`.quantity[service_id='${y}']`).text("0")
            $(`.total[service_id='${y}']`).text("0.00")
            $('#grandtotal').text(finalTotal.toLocaleString())
          }
        })
        
      })

    script.
      $(document).ready(function(){
        $(".checkbox").change(function(){
          recalculate()
         
          if($(this)[0].checked==false)
          {
            var aydi = $(this).attr('value')
            $(`.bagongDuration[id='${aydi}']`).val('')
          }
          var test = $(".checkbox:checked");
          if(test.length == 0){
            $('#totalDuration').text('0')
          }
          });
        function recalculate(){
              var theFutureTime = moment($("#time").text(),"hh:mm A").format('YYYY-MM-DD HH:mm')
              var sum = 0;                                                          
              var duration = 0
              var table =$('#datatables').DataTable()
              var pagelength = table.page.info().pages
              table.page(0).draw()
              var pinakaTotal = 0
              var longest = []
              var newHours = 0
              var newMin = 0
              var highest = 0
        
            for (var i=1;i<=pagelength;i++){
              
              $(".checkbox:checked").each(function(){
              var id= $(this).val()
              var quantity =$(`.quantity[service_id='${id}']`).text()
              var restype = $('.restype[id="restype"]').val()
              var totals = $(`.total[service_id='${id}'`).text()
              var points = $(`.points[id='${id}']`).val()
              points = points * quantity
              if(restype=='single')
                {
                  var hours = Math.floor( $(`.duration[id='${id}']`).val() / 60);          
                  var minutes = $(`.duration[id='${id}']`).val() % 60;
                  hours = hours * quantity;
                  minutes = minutes * quantity;
                  theFutureTime = moment(theFutureTime).add(hours,'hours').add(minutes, 'minutes')
                  $(`.bagongDuration[id='${id}']`).val(moment().hour(hours).minute(minutes).format('hh:mm'))
                  $('#totalDuration').text(moment(theFutureTime).format('hh:mm A'))
                }
                  //- sum += parseInt(points)
              else if(restype=='multiple')
                {
                  var minutes = $(`.duration[id='${id}']`).val();
                  minutes = minutes * quantity;

                  theFutureTime = moment(theFutureTime).add(highest, 'minutes')

                  $(`.bagongDuration[id='${id}']`).val(minutes)
                  longest.push($(`.bagongDuration[id='${id}']`).val())  

                }
                pinakaTotal = eval(pinakaTotal+"+"+totals.replace(/,/g,""));
                //- alert(hours)
                $('#grandtotal').text(pinakaTotal.toLocaleString())
              sum += parseInt(points)
            });
            if(i==pagelength){
              
              for(var j=0;j<longest.length;j++)
                {
                  
                  
  
                  if((longest.length-1)==0)
                    {

                      highest= longest[j];
                      newHours = Math.floor(highest / 60)
                      newMin = highest % 60
                      //- console.log("HOURS: "+newHours)
                      //- console.log("MINUTES: "+newMin)

                    }
                  else if(parseInt(longest[j]) > parseInt(highest))
                    {

                      highest = longest[j];
                      newHours = Math.floor(highest / 60)
                      newMin = highest % 60

                    }
                  if(j == longest.length - 1){

                    theFutureTime = moment(theFutureTime).add(newHours,'hours').add(newMin, 'minutes')
                    $('#totalDuration').text(moment(theFutureTime).format('hh:mm A'))
                    table.page(0).draw()
                    $('#totalPoints').text(sum)
                  }   
                }

            }
             $('#totalPoints').text(sum)
            table.page('next').draw('page');
            }
            table.page(0).draw()
          }
      })
    script.
      $(document).ready(function(){
        $('.logout').click(function(){
              swal({
          title: "Are you sure?",
          text: "Do you want to Log Out?",
          icon: "warning",
          buttons: true,
          dangerMode: true,
        })
        .then((willDelete) => {
          if (willDelete) {
            $.post('/frontdesk/logout')
            location.reload()
          } 
        });
        })
      })
    script.
      $(document).ready(function() {
        var interval = setInterval(function() {
            var momentNow = moment();
            $('#date-part').html(momentNow.format('YYYY MMMM DD') + ' '
                                + momentNow.format('dddd')
                                .substring(0,3).toUpperCase());
            $('#time-part').html(momentNow.format('A hh:mm:ss'));
        }, 100);
        
        $('#stop-interval').on('click', function() {
            clearInterval(interval);
        });
        $('#calendar').val('')
        });
    script(type='text/javascript').
      $(document).ready(function(){
      demo.initOverviewDashboard();
      demo.initCirclePercentage();
      });
    script(type='text/javascript').
      $(document).ready(function(){
      demo.initWizard();
      });
    script(type='text/javascript').
      $(document).ready(function(){
      demo.initFullCalendar();
      });
    script(type='text/javascript').
      $(document).ready(function() {
      $('#datatables').DataTable({"lengthMenu": [[5, 25, 50, -1], [5, 25, 50, "All"]]});
      });
    script(type='text/javascript').
      $(document).ready(function() {
      $('#datatablesPackage').DataTable({"lengthMenu": [[5, 25, 50, -1], [5, 25, 50, "All"]]});
      });
    script(type='text/javascript').
      $(document).ready(function() {
      $('#datatablesPromo').DataTable({"lengthMenu": [[5, 25, 50, -1], [5, 25, 50, "All"]]});
      });

    script.
      $(document).ready(function(){
        //- $('.checkoutButton').click(function(){
        //-   var id = $(this).val()
        //-   $('#checkout').modal('show')
        //-   $.post('/payment/query/CheckoutDets',{id:id})
        //-   .done(data=>{
        //-     console.log(data)
        //-     $('#Room').append(`Room: ${data.out1[0].room_name}`)
        //-     $('#RoomRate').append(`Room Rate: ${data.out1[0].room_rate}`)
            
        //-     if(data.out2.paid_status==0)
        //-     {
        //-       total_amount= data.out2.walkin_total_amount + 600
        //-       $('#TotalPrice').append(`Total: ${total_amount}`)
        //-       $('.totalPrice').val(`${total_amount}`)
        //-     }
        //-     else if (data.out2.paid_status==0)
        //-     {
        //-       $('#TotalPrice').append(`Total: ${data.out2.walkin_total_amount}`)
        //-       $('.totalPrice').val(`${data.out2.walkin_total_amount}`)
        //-     }
        //-     else
        //-     {
        //-       $('#TotalPrice').append(`Total: ${data.out2.walkin_total_amount}`)
        //-       $('.totalPrice').val(`${data.out2.walkin_total_amount}`)
        //-     }
            
        //-       $('#TotalPoints').append(`Total Points to be earned: ${data.out2.walkin_total_points}`)
        //-       $('.hello').val(data.out2.cust_id)
        //-     if(data.out2.cust_type==0)
        //-     {
        //-     }
        //-     else
        //-     {
        //-         $('.hello').addClass('hidden')
        //-         $('#appendDito').append(`
        //-           <div class="form-group has-default bmd-form-group">
        //-           <label> Current Points: ${data.out2.member_points}
        //-             <div class="checkbox">
        //-               <input id="checkbox1" type="checkbox"/>
        //-               <label for="checkbox1">Pay using Points</label>
        //-             </div>
        //-         </div>`)
        //-     }

        //-     $('#custName').append(`Customer Name: ${data.out2.cust_fname} ${data.out2.cust_mname} ${data.out2.cust_lname}`)
        //-     for(var i=0;i<data.out1.length;i++)
        //-     {
        //-     $('#viewServicesAvailed').append(`
        //-       <tr>
        //-       <td>${data.out1[i].service_name}</td>
        //-       <td>${data.out1[i].service_total_quantity}</td>
        //-       <td>${data.out1[i].service_total_price}</td>
        //-       <td>${data.out1[i].equivalent_points}</td>
        //-       </tr>
        //-     `)
        //-     }
        //-     $('#checkout').on('hidden.bs.modal', function (){
        //-   $('#viewServicesAvailed').empty()
        //-   $('#custName').empty()
        //-   $('#TotalPrice').empty()
        //-   $('.totalPrice').empty()  
        //- })
        //-   })
        
        
        
        //- $('.buttonDone').click(function(){
        //-   alert($('.amountReceived').val())
        //-   alert($('.totalPrice').val())
        //-   alert(1000 < 800)
        //-   if($('.amountReceived').val()==0)
        //-     {
        //-       swal({
        //-         title: "Amount Received is 0",
        //-         icon: 'warning'
        //-       })
        //-     }
        //-   else if(parseInt($('.amountReceived').val()) < parseInt($('.totalPrice').val()))
        //-     {
        //-       swal({
        //-         title: "Amount Received is insufficient",
        //-         icon: 'warning'
        //-       })
        //-     }
        //-   else
        //-     {
        //-   $.post('/payment/Finish',{
        //-     id:id,
        //-     amount: $('.totalPrice').val(),
        //-     cust_id: $('.hello').val() 
        //-     }).done(function(data){
        //-       if(data.alertDesc==0)
        //-         {
        //-           swal({
        //-             title: "Success",
        //-             icon: 'success'
        //-           }).then(function(){
        //-             location.reload()
        //-           })
        //-         }
        //-       else
        //-         {
        //-           swal({
        //-             title: "ERROR",
        //-             icon: 'error'
        //-           })
        //-         }
            
        //-     })
        //-     }
        //- })
        //- })
      
        $('.viewdetailsButton').click(function(){
          var id = $(this).val()
          $.post('/payment/query/CheckoutDets',{id:id})
          .done(data=>{
            $('#viewDetails').modal('show')
          })
        })
      })
    script.
      $(document).ready(function(){
        $('.hello').click(function(){
          var id = $(this).val()
            $('#RegisterModal').modal('show')
            $('#checkout').modal('hide')
            $('.buttonRegister').click(function(){
              $.post('/payment/register',{
                username: $('#username').val(),
                password: $('#password').val(),
                id:id})
                .done(function(data){
                  console.log(data)
                  if(data.alertDesc==0)
                    {
                      swal({
                        title: "Success",
                        icon: "success"
                      }).then(function(){
                        $('#RegisterModal').modal('hide')
                        location.reload()
                      })
                    }
                  else if(data.alertDesc==3)
                    {
                      swal({
                        title:'Not Success', 
                        text:'Username Already Exist', 
                        icon:'warning'
                        }).then(function(){
                          $('#RegisterModal').modal('show')
                        })
                    }
                  else if(data.alertDesc==1)
                    {
                      swal({
                        title: 'ERROR',
                        icon: 'error'
                      })
                    }
                })
          })
        })
      })

