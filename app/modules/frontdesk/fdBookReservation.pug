doctype html
html(lang='en')
  head
    meta(charset='utf-8')
    link(rel='apple-touch-icon', sizes='76x76', href='../paperDashboardPro/img/apple-icon.png')
    link(rel='icon', type='image/png', sizes='96x96', href='../paperDashboardPro/img/favicon.png')
    meta(http-equiv='X-UA-Compatible', content='IE=edge,chrome=1')
    title MBAY Health Spa
    // Canonical SEO
    link(rel='canonical', href='http://www.creative-tim.com/product/paper-dashboard-pro')
    meta(content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0', name='viewport')
    meta(name='viewport', content='width=device-width')
    // Bootstrap core CSS
    link(href='/assets/paperDashboardPro/css/bootstrap.min.css', rel='stylesheet')
    // Paper Dashboard core CSS
    link(href='/assets/paperDashboardPro/css/paper-dashboard.css', rel='stylesheet')
    // CSS for Demo Purpose, don't include it in your project
    link(href='/assets/paperDashboardPro/css/demo.css', rel='stylesheet')
    // Fonts and icons
    link(href='http://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css', rel='stylesheet')
    link(href='https://fonts.googleapis.com/css?family=Muli:400,300', rel='stylesheet', type='text/css')
    link(href='/assets/paperDashboardPro/css/themify-icons.css', rel='stylesheet')
  body.sidebar-mini
    .wrapper
      .sidebar(data-active-color='spa', style='color: white')
        //
          Tip 1: you can change the color of the sidebar's background using: data-background-color="white | brown"
          Tip 2: you can change the color of the active button using the data-active-color="primary | info | success | warning | danger"
        .logo
          a.simple-text.logo-mini(href='http://www.creative-tim.com')
            | FD
          a.simple-text.logo-normal(href='http://www.creative-tim.com')
            | MBAY Health Spa
        .sidebar-wrapper
          .user
            .info
              .photo
                img(src='../paperDashboardPro/img/faces/face-2.jpg')
              a.collapsed(data-toggle='collapse', href='#collapseExample')
                span
                  | Front Desk
              .clearfix
          ul.nav
            li
              a(href='./frontdesk/home')
                i.ti-pencil
                p
                  | Registration
            li.active
              a(href='#')
                i.ti-calendar
                p
                  | Reservation
            li
              a(href='#')
                i.ti-credit-card
                p
                  | Payment      
      .main-panel
        nav.navbar.navbar-default
          .container-fluid
            .navbar-minimize
              button#minimizeSidebar.btn.btn-fill.btn-icon
                i.ti-more-alt
            .navbar-header
              button.navbar-toggle(type='button')
                span.sr-only Toggle navigation
                span.icon-bar.bar1
                span.icon-bar.bar2
                span.icon-bar.bar3
              a.navbar-brand(href='#Dashboard')
                | Overview
            .collapse.navbar-collapse
              form.navbar-form.navbar-left.navbar-search-form(role='search')
                .input-group
                  span.input-group-addon
                    i.fa.fa-search
                  input.form-control(type='text', value='', placeholder='Search...')
              ul.nav.navbar-nav.navbar-right
                li
                  a#date-part(style="color: black")
                li
                  a#time-part(style="color: black") 
                li
                  a.logout(style="cursor: pointer; color: black") Log Out
        .content
          .col-lg-12.col-md-12
            .card
              .card-header
                each customer in customers
                  h4.card-title
                    strong#name= "Name: "+ customer.cust_fname+" "+customer.cust_mname+" "+customer.cust_lname
                  h5.category
                    strong#gender= "Gender: "+ customer.cust_gender
                  h5.category
                    strong= "Medical History: "+customer.medical_history
                br
                br
                h4.card-title
                  strong#room= `Room: ${room}` 
                br
                h4.card-title
                  strong#date= `Date: ${date}`
                  br
                  strong#time= `Time: ${time}`
              .card-content
                .nav-tabs-navigation
                  .nav-tabs-wrapper
                    ul#tabs.nav.nav-tabs(data-tabs='tabs')
                      li.active
                        a(href='#single', data-toggle='tab') Single
                      li
                        a(href='#multiple', data-toggle='tab') Multiple
                      li
                        a(href='#packages', data-toggle='tab') Packages
                #my-tab-content.tab-content
                  #single.tab-pane.active
                    .content
                      .container-fluid
                        .row
                          .col-md-12
                            .card
                              .card-content
                                .toolbar
                                  // Here you can write extra buttons/actions for the toolbar
                                .fresh-datatables
                                  table#datatables.table.table-no-bordered.table-hover(cellspacing='0', width='100%', style='width:100%')
                                    thead
                                      tr
                                        th
                                        th
                                          strong  Services 
                                        th
                                          strong  Duration
                                        th
                                          strong Price
                                        th
                                          strong Quantity
                                        th
                                          strong Points
                                        th
                                          strong Total
                                        //- th.text-center.disable-sorting(data-field='therapist', style='margin-right: 50px')
                                        //-   strong Therapist
                                    tbody
                                      each service in services
                                        tr
                                          td
                                            input.checkbox(type='checkbox' value=`${service.service_id}`)
                                            
                                          td= service.service_name
                                          td= service.service_duration_desc+" minutes"
                                            input.duration(type='hidden' value=`${service.service_duration_desc}` id=`${service.service_id}`)
                                          td
                                            input.price(type="hidden" id=`${service.service_id}` value=`${service.service_price}`)
                                            span= service.service_price
                                          td
                                            span.quantity(service_id=`${service.service_id}`) 0
                                          
                                          input.points(type='hidden' id=`${service.service_id}` value=`${service.service_points}`)
                                          if(service.service_points==1|| service.service_points==0)
                                            td= service.service_points+" "+"Point"
                                          else if(service.service_points > 0)
                                            td= service.service_points+" "+"Points"
                                          td
                                            span.total(service_id=`${service.service_id}`) 0.00
                                          //- td
                                          //-   .col-sm-8
                                          //-     .dropdown
                                          //-       button.btn.btn-info.dropdown-toggle(href='#', data-toggle='dropdown')
                                          //-         | Select Therapist
                                          //-         b.caret
                                          //-       ul.dropdown-menu
                                          //-         li
                                          //-           a(href='#') Ninya Bolado
                                          //-         li
                                          //-           a(href='#') Gramar Lacsina
                                    h4 Total: 
                                      a(id="grandtotal") 0.00 
                                    h4 Points: 
                                      a(id="totalPoints") 0
                                    h4 End Time:
                                      a(id='totalDuration') 0  
                            
                            button.btn.btn-secondary.pull-left.btn.btn-danger.btn-fill.btn-wd(type='button', data-dismiss='modal') Cancel
                            button.btn.btn-secondary.pull-right.btn.btn-info.btn-fill.btn-wd.buttonSummary(type='button') Reserve
                            // end card
                          // end col-md-12
                        // end row
                  #multiple.tab-pane
                    p Here is your profile.
                  #packages.tab-pane
                    p Here are your messages.
        #reservationSummary.modal.fade(tabindex='-1', role='dialog')
          .modal-dialog.modal-lg(role='document')
            .modal-content
              .modal-header
                h3.modal-title
                  center Reservation Summary
                button.close(type='button', data-dismiss='modal', aria-label='Close')
              .modal-body
                .col-lg-12.col-md-12
                    h5.category
                      strong#Name= "Name: "
                    h5.category
                      strong#Gender= "Gender: "
                    h5.category
                      strong#Room= `Room:` 
                  
                    h5.category
                      strong#Date= `Date:`
                    .row
                      .form-group
                        .col-md-3
                          h5.category
                            strong#Time Start Time:
                        .col-md-3
                          h5.category
                            strong End Time: 
                  
                    h5.category
                        strong Total:
                .row
                    .col-md-12
                      .card-content
                        .toolbar
                        .fresh-datatables
                        table#datatables.table.table-no-bordered.table-hover(cellspacing='0', width='100%', style='width:100%')
                          thead
                            tr
                              th
                              th
                                strong  Services 
                              th
                                strong  Quantity
                              th
                                strong Duration 
                          tbody
                            
                              tr
                                td
                                td
                                td
                                td
                                td
                                td
                                td
              .modal-footer
                button.btn.btn-secondary.pull-right.btn.btn-info.btn-fill.btn-wd(type='button') Add Service
                button.btn.btn-secondary.pull-left.btn.btn-danger.btn-fill.btn-wd(type='button', data-dismiss='modal') Cancel
       
    .fixed-plugin
    // Core JS Files. Extra: TouchPunch for touch library inside jquery-ui.min.js
    script(src='/assets/paperDashboardPro/js/jquery-3.1.1.min.js', type='text/javascript')
    script(src='/assets/paperDashboardPro/js/jquery-ui.min.js', type='text/javascript')
    script(src='/assets/paperDashboardPro/js/perfect-scrollbar.min.js', type='text/javascript')
    script(src='/assets/paperDashboardPro/js/bootstrap.min.js', type='text/javascript')
    // Forms Validations Plugin
    script(src='/assets/paperDashboardPro/js/jquery.validate.min.js')
    // Promise Library for SweetAlert2 working on IE
    script(src='/assets/paperDashboardPro/js/es6-promise-auto.min.js')
    // Plugin for Date Time Picker and Full Calendar Plugin
    script(src='/assets/paperDashboardPro/js/moment.min.js')
    // Date Time Picker Plugin is included in this js file
    script(src='/assets/paperDashboardPro/js/bootstrap-datetimepicker.js')
    // Select Picker Plugin
    script(src='/assets/paperDashboardPro/js/bootstrap-selectpicker.js')
    // Switch and Tags Input Plugins
    script(src='/assets/paperDashboardPro/js/bootstrap-switch-tags.js')
    // Circle Percentage-chart
    script(src='/assets/paperDashboardPro/js/jquery.easypiechart.min.js')
    // Charts Plugin
    script(src='/assets/paperDashboardPro/js/chartist.min.js')
    // Notifications Plugin
    script(src='/assets/paperDashboardPro/js/bootstrap-notify.js')
    // Sweet Alert 2 plugin
    script(src='/assets/paperDashboardPro/js/sweetalert.js')
    // Vector Map plugin
    script(src='/assets/paperDashboardPro/js/jquery-jvectormap.js')
    // Wizard Plugin
    script(src='/assets/paperDashboardPro/js/jquery.bootstrap.wizard.min.js')
    // Bootstrap Table Plugin
    script(src='/assets/paperDashboardPro/js/bootstrap-table.js')
    // Plugin for DataTables.net
    script(src='/assets/paperDashboardPro/js/jquery.datatables.js')
    // Full Calendar Plugin
    script(src='/assets/paperDashboardPro/js/fullcalendar.min.js')
    // Paper Dashboard PRO Core javascript and methods for Demo purpose
    script(src='/assets/paperDashboardPro/js/paper-dashboard.js')
    // Sharrre Library
    script(src='/assets/paperDashboardPro/js/jquery.sharrre.js')
    // Paper Dashboard PRO DEMO methods, don't include it in your project!
    script(src='/assets/paperDashboardPro/js/demo.js')
    script.
      $('.buttonSummary').click(function(){
        $('#reservationSummary').modal('show')
        var Name = $('#name').text()
        var Gender = $('#gender').text()
        var Room = $('#room').text()
        var Date = $('#date').text()
        var Time = $('#time').text()
        $('#Name').text(Name)
        $('#Gender').text(Gender)
        $('#Room').text(Room)
        $('#Date').text(Date)
        $('#Time').text(Time)
      })
    script.
      $(document).ready(function(){
        $('.checkbox').on('change.bootstrapSwitch', function(e){
          if(e.target.checked==true)
          {
            var qnty
            var y=$(this).val()
            var price = $(`.price[id='${y}']`).val()
            //- var hours = Math.floor( $(`.duration[id='${y}']`).val() / 60);          
            //- var minutes = $(`.duration[id='${y}']`).val() % 60;
            var points = $(`.points[id='${y}']`).val()
            //- if(minutes==0)
            //- {
            //-   var newDuration = "0"+hours+":"+minutes+"0"
            //- }
            //- else
            //- {
            //-   var newDuration = "0"+hours+":"+minutes
            //- }
            var quantity = prompt("Quantity")

            if (quantity==null || quantity=="")
            {
              e.target.checked=false;
            }
            else
            {
              $(`.quantity[service_id='${y}']`).text(quantity)
              total = quantity * price;
            }
              $(`.total[service_id='${y}']`).text(total.toLocaleString())
              computeGrandTotal()
          }

          else if(e.target.checked==false)
          {
            var y=$(this).val()
            var total = $(`.total[service_id='${y}']`).text()
            var grandTotal = $('#grandtotal').text()
            var finalTotal = grandTotal.replace(/,/g,"") - total.replace(/,/g,"")
            $(`.quantity[service_id='${y}']`).text("0")
            $(`.total[service_id='${y}']`).text("0.00")
            $('#grandtotal').text(finalTotal.toLocaleString())
          }
        })
        function computeGrandTotal(){
          var totals = $('.total')
          var pinakaTotal = 0;
          for(var i =0;i<totals.length;i++){
            pinakaTotal = eval(pinakaTotal+"+"+totals[i].textContent.replace(/,/g,""));
          }
          $('#grandtotal').text(pinakaTotal.toLocaleString())
        }
      })

    script.
      $(document).ready(function(){
        $(".checkbox").change(function(){
            recalculate();
          });


          function recalculate(){
              var sum = 0;                                                          
            $(".checkbox:checked").each(function(){
              var id= $(this).val()
              var hours = Math.floor( $(`.duration[id='${id}']`).val() / 60);          
              var minutes = $(`.duration[id='${id}']`).val() % 60;
              var points = $(`.points[id='${id}']`).val()
              var duration = 0
              alert(duration)
              if(minutes==0)
              {
                var newDuration = "0"+hours+":"+minutes+"0"
                var theFutureTime = moment().hour(hours).minute(minutes).add(duration,'hours').format('hh:mm');
                var newDuration = theFutureTime + duration
                $('#totalDuration').text(theFutureTime)
              }
              else
              {
                var newDuration = "0"+hours+":"+minutes
              }
              sum += parseInt(points)
              alert(theFutureTime)
            });
              $('#totalPoints').text(sum)
              //- sum = sum + checkboxess
          }
      })
    script.
      $(document).ready(function(){
        $('.logout').click(function(){
              swal({
          title: "Are you sure?",
          text: "Do you want to Log Out?",
          icon: "warning",
          buttons: true,
          dangerMode: true,
        })
        .then((willDelete) => {
          if (willDelete) {
            $.post('/frontdesk/logout')
            location.reload()
          } 
        });
        })
      })
    script.
      $(document).ready(function() {
        var interval = setInterval(function() {
            var momentNow = moment();
            $('#date-part').html(momentNow.format('YYYY MMMM DD') + ' '
                                + momentNow.format('dddd')
                                .substring(0,3).toUpperCase());
            $('#time-part').html(momentNow.format('A hh:mm:ss'));
        }, 100);
        
        $('#stop-interval').on('click', function() {
            clearInterval(interval);
        });
        $('#calendar').val('')
        });
    script(type='text/javascript').
      $(document).ready(function(){
      demo.initOverviewDashboard();
      demo.initCirclePercentage();
      });
    script(type='text/javascript').
      $(document).ready(function(){
      demo.initWizard();
      });
    script(type='text/javascript').
      $(document).ready(function(){
      demo.initFullCalendar();
      });
    script(type='text/javascript').
      $(document).ready(function() {
      $('#datatables').DataTable({"lengthMenu": [[5, 25, 50, -1], [5, 25, 50, "All"]]});
      });
